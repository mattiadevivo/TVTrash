function Uo(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const A={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return In(this.context.count)},getNextContextId(){return In(this.context.count++)}};function In(t){const e=String(t),r=e.length-1;return A.context.id+(r?String.fromCharCode(96+r):"")+e}function bt(t){A.context=t}const No=!1,Do=(t,e)=>t===e,nr=Symbol("solid-proxy"),qs=typeof Proxy=="function",Lo=Symbol("solid-track"),sr={equals:Do};let kt=null,Zs=Js;const pe=1,Ct=2,Vs={owned:null,cleanups:null,context:null,owner:null},Sr={};var R=null;let E=null,zo=null,B=null,ae=null,te=null,fr=0;function lt(t,e){const r=B,n=R,s=t.length===0,i=e===void 0?n:e,o=s?Vs:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?t:()=>t(()=>le(()=>Ae(o)));R=o,B=null;try{return fe(a,!0)}finally{B=r,R=n}}function L(t,e){e=e?Object.assign({},sr,e):sr;const r={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},n=s=>(typeof s=="function"&&(E&&E.running&&E.sources.has(r)?s=s(r.tValue):s=s(r.value)),Gs(r,s));return[Hs.bind(r),n]}function jn(t,e,r){const n=Ut(t,e,!0,pe);gt(n)}function J(t,e,r){const n=Ut(t,e,!1,pe);gt(n)}function ln(t,e,r){Zs=Ko;const n=Ut(t,e,!1,pe),s=qe&&ve(qe);s&&(n.suspense=s),n.user=!0,te?te.push(n):gt(n)}function I(t,e,r){r=r?Object.assign({},sr,r):sr;const n=Ut(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,gt(n),Hs.bind(n)}function Bo(t){return t&&typeof t=="object"&&"then"in t}function Et(t,e,r){let n,s,i;typeof e=="function"?(n=t,s=e,i={}):(n=!0,s=t,i=e||{});let o=null,a=Sr,l=null,c=!1,u=!1,h="initialValue"in i,f=typeof n=="function"&&I(n);const d=new Set,[g,p]=(i.storage||L)(i.initialValue),[v,y]=L(void 0),[_,m]=L(void 0,{equals:!1}),[b,$]=L(h?"ready":"unresolved");A.context&&(l=A.getNextContextId(),i.ssrLoadFrom==="initial"?a=i.initialValue:A.load&&A.has(l)&&(a=A.load(l)));function C(M,U,z,ce){return o===M&&(o=null,ce!==void 0&&(h=!0),(M===a||U===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(ce,{value:U})),a=Sr,E&&M&&c?(E.promises.delete(M),c=!1,fe(()=>{E.running=!0,N(U,z)},!1)):N(U,z)),U}function N(M,U){fe(()=>{U===void 0&&p(()=>M),$(U!==void 0?"errored":h?"ready":"unresolved"),y(U);for(const z of d.keys())z.decrement();d.clear()},!1)}function Q(){const M=qe&&ve(qe),U=g(),z=v();if(z!==void 0&&!o)throw z;return B&&!B.user&&M&&jn(()=>{_(),o&&(M.resolved&&E&&c?E.promises.add(o):d.has(M)||(M.increment(),d.add(M)))}),U}function H(M=!0){if(M!==!1&&u)return;u=!1;const U=f?f():n;if(c=E&&E.running,U==null||U===!1){C(o,le(g));return}E&&o&&E.promises.delete(o);const z=a!==Sr?a:le(()=>s(U,{value:g(),refetching:M}));return Bo(z)?(o=z,"value"in z?(z.status==="success"?C(o,z.value,void 0,U):C(o,void 0,Nr(z.value),U),z):(u=!0,queueMicrotask(()=>u=!1),fe(()=>{$(h?"refreshing":"pending"),m()},!1),z.then(ce=>C(z,ce,void 0,U),ce=>C(z,void 0,Nr(ce),U)))):(C(o,z,void 0,U),z)}return Object.defineProperties(Q,{state:{get:()=>b()},error:{get:()=>v()},loading:{get(){const M=b();return M==="pending"||M==="refreshing"}},latest:{get(){if(!h)return Q();const M=v();if(M&&!o)throw M;return g()}}}),f?jn(()=>H(!1)):H(!1),[Q,{refetch:H,mutate:p}]}function Mo(t){return fe(t,!1)}function le(t){if(B===null)return t();const e=B;B=null;try{return t()}finally{B=e}}function cn(t,e,r){const n=Array.isArray(t);let s,i=r&&r.defer;return o=>{let a;if(n){a=Array(t.length);for(let c=0;c<t.length;c++)a[c]=t[c]()}else a=t();if(i)return i=!1,o;const l=le(()=>e(a,s,o));return s=a,l}}function Ws(t){ln(()=>le(t))}function We(t){return R===null||(R.cleanups===null?R.cleanups=[t]:R.cleanups.push(t)),t}function Fo(t,e){kt||(kt=Symbol("error")),R=Ut(void 0,void 0,!0),R.context={...R.context,[kt]:[e]},E&&E.running&&E.sources.add(R);try{return t()}catch(r){Nt(r)}finally{R=R.owner}}function un(){return R}function Ks(t,e){const r=R,n=B;R=t,B=null;try{return fe(e,!0)}catch(s){Nt(s)}finally{R=r,B=n}}function qo(t){if(E&&E.running)return t(),E.done;const e=B,r=R;return Promise.resolve().then(()=>{B=e,R=r;let n;return qe&&(n=E||(E={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),n.done||(n.done=new Promise(s=>n.resolve=s)),n.running=!0),fe(t,!1),B=R=null,n?n.done:void 0})}const[gm,Un]=L(!1);function Zo(t){te.push.apply(te,t),t.length=0}function Se(t,e){const r=Symbol("context");return{id:r,Provider:Ho(r),defaultValue:t}}function ve(t){let e;return R&&R.context&&(e=R.context[t.id])!==void 0?e:t.defaultValue}function hn(t){const e=I(t),r=I(()=>Dr(e()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let qe;function Vo(){return qe||(qe=Se())}function Hs(){const t=E&&E.running;if(this.sources&&(t?this.tState:this.state))if((t?this.tState:this.state)===pe)gt(this);else{const e=ae;ae=null,fe(()=>or(this),!1),ae=e}if(B){const e=this.observers?this.observers.length:0;B.sources?(B.sources.push(this),B.sourceSlots.push(e)):(B.sources=[this],B.sourceSlots=[e]),this.observers?(this.observers.push(B),this.observerSlots.push(B.sources.length-1)):(this.observers=[B],this.observerSlots=[B.sources.length-1])}return t&&E.sources.has(this)?this.tValue:this.value}function Gs(t,e,r){let n=E&&E.running&&E.sources.has(t)?t.tValue:t.value;if(!t.comparator||!t.comparator(n,e)){if(E){const s=E.running;(s||!r&&E.sources.has(t))&&(E.sources.add(t),t.tValue=e),s||(t.value=e)}else t.value=e;t.observers&&t.observers.length&&fe(()=>{for(let s=0;s<t.observers.length;s+=1){const i=t.observers[s],o=E&&E.running;o&&E.disposed.has(i)||((o?!i.tState:!i.state)&&(i.pure?ae.push(i):te.push(i),i.observers&&Ys(i)),o?i.tState=pe:i.state=pe)}if(ae.length>1e6)throw ae=[],new Error},!1)}return e}function gt(t){if(!t.fn)return;Ae(t);const e=fr;Nn(t,E&&E.running&&E.sources.has(t)?t.tValue:t.value,e),E&&!E.running&&E.sources.has(t)&&queueMicrotask(()=>{fe(()=>{E&&(E.running=!0),B=R=t,Nn(t,t.tValue,e),B=R=null},!1)})}function Nn(t,e,r){let n;const s=R,i=B;B=R=t;try{n=t.fn(e)}catch(o){return t.pure&&(E&&E.running?(t.tState=pe,t.tOwned&&t.tOwned.forEach(Ae),t.tOwned=void 0):(t.state=pe,t.owned&&t.owned.forEach(Ae),t.owned=null)),t.updatedAt=r+1,Nt(o)}finally{B=i,R=s}(!t.updatedAt||t.updatedAt<=r)&&(t.updatedAt!=null&&"observers"in t?Gs(t,n,!0):E&&E.running&&t.pure?(E.sources.add(t),t.tValue=n):t.value=n,t.updatedAt=r)}function Ut(t,e,r,n=pe,s){const i={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:R,context:R?R.context:null,pure:r};return E&&E.running&&(i.state=0,i.tState=n),R===null||R!==Vs&&(E&&E.running&&R.pure?R.tOwned?R.tOwned.push(i):R.tOwned=[i]:R.owned?R.owned.push(i):R.owned=[i]),i}function ir(t){const e=E&&E.running;if((e?t.tState:t.state)===0)return;if((e?t.tState:t.state)===Ct)return or(t);if(t.suspense&&le(t.suspense.inFallback))return t.suspense.effects.push(t);const r=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<fr);){if(e&&E.disposed.has(t))return;(e?t.tState:t.state)&&r.push(t)}for(let n=r.length-1;n>=0;n--){if(t=r[n],e){let s=t,i=r[n+1];for(;(s=s.owner)&&s!==i;)if(E.disposed.has(s))return}if((e?t.tState:t.state)===pe)gt(t);else if((e?t.tState:t.state)===Ct){const s=ae;ae=null,fe(()=>or(t,r[0]),!1),ae=s}}}function fe(t,e){if(ae)return t();let r=!1;e||(ae=[]),te?r=!0:te=[],fr++;try{const n=t();return Wo(r),n}catch(n){r||(te=null),ae=null,Nt(n)}}function Wo(t){if(ae&&(Js(ae),ae=null),t)return;let e;if(E){if(!E.promises.size&&!E.queue.size){const n=E.sources,s=E.disposed;te.push.apply(te,E.effects),e=E.resolve;for(const i of te)"tState"in i&&(i.state=i.tState),delete i.tState;E=null,fe(()=>{for(const i of s)Ae(i);for(const i of n){if(i.value=i.tValue,i.owned)for(let o=0,a=i.owned.length;o<a;o++)Ae(i.owned[o]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}Un(!1)},!1)}else if(E.running){E.running=!1,E.effects.push.apply(E.effects,te),te=null,Un(!0);return}}const r=te;te=null,r.length&&fe(()=>Zs(r),!1),e&&e()}function Js(t){for(let e=0;e<t.length;e++)ir(t[e])}function Ko(t){let e,r=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[r++]=n:ir(n)}if(A.context){if(A.count){A.effects||(A.effects=[]),A.effects.push(...t.slice(0,r));return}bt()}for(A.effects&&(A.done||!A.count)&&(t=[...A.effects,...t],r+=A.effects.length,delete A.effects),e=0;e<r;e++)ir(t[e])}function or(t,e){const r=E&&E.running;r?t.tState=0:t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const i=r?s.tState:s.state;i===pe?s!==e&&(!s.updatedAt||s.updatedAt<fr)&&ir(s):i===Ct&&or(s,e)}}}function Ys(t){const e=E&&E.running;for(let r=0;r<t.observers.length;r+=1){const n=t.observers[r];(e?!n.tState:!n.state)&&(e?n.tState=Ct:n.state=Ct,n.pure?ae.push(n):te.push(n),n.observers&&Ys(n))}}function Ae(t){let e;if(t.sources)for(;t.sources.length;){const r=t.sources.pop(),n=t.sourceSlots.pop(),s=r.observers;if(s&&s.length){const i=s.pop(),o=r.observerSlots.pop();n<s.length&&(i.sourceSlots[o]=n,s[n]=i,r.observerSlots[n]=o)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)Ae(t.tOwned[e]);delete t.tOwned}if(E&&E.running&&t.pure)Qs(t,!0);else if(t.owned){for(e=t.owned.length-1;e>=0;e--)Ae(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}E&&E.running?t.tState=0:t.state=0}function Qs(t,e){if(e||(t.tState=0,E.disposed.add(t)),t.owned)for(let r=0;r<t.owned.length;r++)Qs(t.owned[r])}function Nr(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Dn(t,e,r){try{for(const n of e)n(t)}catch(n){Nt(n,r&&r.owner||null)}}function Nt(t,e=R){const r=kt&&e&&e.context&&e.context[kt],n=Nr(t);if(!r)throw n;te?te.push({fn(){Dn(n,r,e)},state:pe}):Dn(n,r,e)}function Dr(t){if(typeof t=="function"&&!t.length)return Dr(t());if(Array.isArray(t)){const e=[];for(let r=0;r<t.length;r++){const n=Dr(t[r]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return t}function Ho(t,e){return function(n){let s;return J(()=>s=le(()=>(R.context={...R.context,[t]:n.value},hn(()=>n.children))),void 0),s}}const Go=Symbol("fallback");function Ln(t){for(let e=0;e<t.length;e++)t[e]()}function Jo(t,e,r={}){let n=[],s=[],i=[],o=0,a=e.length>1?[]:null;return We(()=>Ln(i)),()=>{let l=t()||[],c=l.length,u,h;return l[Lo],le(()=>{let d,g,p,v,y,_,m,b,$;if(c===0)o!==0&&(Ln(i),i=[],n=[],s=[],o=0,a&&(a=[])),r.fallback&&(n=[Go],s[0]=lt(C=>(i[0]=C,r.fallback())),o=1);else if(o===0){for(s=new Array(c),h=0;h<c;h++)n[h]=l[h],s[h]=lt(f);o=c}else{for(p=new Array(c),v=new Array(c),a&&(y=new Array(c)),_=0,m=Math.min(o,c);_<m&&n[_]===l[_];_++);for(m=o-1,b=c-1;m>=_&&b>=_&&n[m]===l[b];m--,b--)p[b]=s[m],v[b]=i[m],a&&(y[b]=a[m]);for(d=new Map,g=new Array(b+1),h=b;h>=_;h--)$=l[h],u=d.get($),g[h]=u===void 0?-1:u,d.set($,h);for(u=_;u<=m;u++)$=n[u],h=d.get($),h!==void 0&&h!==-1?(p[h]=s[u],v[h]=i[u],a&&(y[h]=a[u]),h=g[h],d.set($,h)):i[u]();for(h=_;h<c;h++)h in p?(s[h]=p[h],i[h]=v[h],a&&(a[h]=y[h],a[h](h))):s[h]=lt(f);s=s.slice(0,o=c),n=l.slice(0)}return s});function f(d){if(i[h]=d,a){const[g,p]=L(h);return a[h]=p,e(l[h],g)}return e(l[h])}}}function w(t,e){return le(()=>t(e||{}))}function Mt(){return!0}const Lr={get(t,e,r){return e===nr?r:t.get(e)},has(t,e){return e===nr?!0:t.has(e)},set:Mt,deleteProperty:Mt,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Mt,deleteProperty:Mt}},ownKeys(t){return t.keys()}};function kr(t){return(t=typeof t=="function"?t():t)?t:{}}function Yo(){for(let t=0,e=this.length;t<e;++t){const r=this[t]();if(r!==void 0)return r}}function me(...t){let e=!1;for(let o=0;o<t.length;o++){const a=t[o];e=e||!!a&&nr in a,t[o]=typeof a=="function"?(e=!0,I(a)):a}if(qs&&e)return new Proxy({get(o){for(let a=t.length-1;a>=0;a--){const l=kr(t[a])[o];if(l!==void 0)return l}},has(o){for(let a=t.length-1;a>=0;a--)if(o in kr(t[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<t.length;a++)o.push(...Object.keys(kr(t[a])));return[...new Set(o)]}},Lr);const r={},n=Object.create(null);for(let o=t.length-1;o>=0;o--){const a=t[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,u);if(!n[u])n[u]=h.get?{enumerable:!0,configurable:!0,get:Yo.bind(r[u]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const f=r[u];f&&(h.get?f.push(h.get.bind(a)):h.value!==void 0&&f.push(()=>h.value))}}}const s={},i=Object.keys(n);for(let o=i.length-1;o>=0;o--){const a=i[o],l=n[a];l&&l.get?Object.defineProperty(s,a,l):s[a]=l?l.value:void 0}return s}function dn(t,...e){if(qs&&nr in t){const s=new Set(e.length>1?e.flat():e[0]),i=e.map(o=>new Proxy({get(a){return o.includes(a)?t[a]:void 0},has(a){return o.includes(a)&&a in t},keys(){return o.filter(a=>a in t)}},Lr));return i.push(new Proxy({get(o){return s.has(o)?void 0:t[o]},has(o){return s.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!s.has(o))}},Lr)),i}const r={},n=e.map(()=>({}));for(const s of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,s),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const c of e)c.includes(s)&&(a=!0,o?n[l][s]=i.value:Object.defineProperty(n[l],s,i)),++l;a||(o?r[s]=i.value:Object.defineProperty(r,s,i))}return[...n,r]}let Qo=0;function Xo(){return A.context?A.getNextContextId():`cl-${Qo++}`}const ea=t=>`Stale read from <${t}>.`;function gr(t){const e="fallback"in t&&{fallback:()=>t.fallback};return I(Jo(()=>t.each,t.children,e||void 0))}function de(t){const e=t.keyed,r=I(()=>t.when,void 0,void 0),n=e?r:I(r,void 0,{equals:(s,i)=>!s==!i});return I(()=>{const s=n();if(s){const i=t.children;return typeof i=="function"&&i.length>0?le(()=>i(e?s:()=>{if(!le(n))throw ea("Show");return r()})):i}return t.fallback},void 0,void 0)}let at;function ta(){at&&[...at].forEach(t=>t())}function ra(t){let e;A.context&&A.load&&(e=A.load(A.getContextId()));const[r,n]=L(e,void 0);return at||(at=new Set),at.add(n),We(()=>at.delete(n)),I(()=>{let s;if(s=r()){const i=t.fallback;return typeof i=="function"&&i.length?le(()=>i(s,()=>n())):i}return Fo(()=>t.children,n)},void 0,void 0)}const na=Se();function Xs(t){let e=0,r,n,s,i,o;const[a,l]=L(!1),c=Vo(),u={increment:()=>{++e===1&&l(!0)},decrement:()=>{--e===0&&l(!1)},inFallback:a,effects:[],resolved:!1},h=un();if(A.context&&A.load){const g=A.getContextId();let p=A.load(g);if(p&&(typeof p!="object"||p.status!=="success"?s=p:A.gather(g)),s&&s!=="$$f"){const[v,y]=L(void 0,{equals:!1});i=v,s.then(()=>{if(A.done)return y();A.gather(g),bt(n),y(),bt()},_=>{o=_,y()})}}const f=ve(na);f&&(r=f.register(u.inFallback));let d;return We(()=>d&&d()),w(c.Provider,{value:u,get children(){return I(()=>{if(o)throw o;if(n=A.context,i)return i(),i=void 0;n&&s==="$$f"&&bt();const g=I(()=>t.children);return I(p=>{const v=u.inFallback(),{showContent:y=!0,showFallback:_=!0}=r?r():{};if((!v||s&&s!=="$$f")&&y)return u.resolved=!0,d&&d(),d=n=s=void 0,Zo(u.effects),g();if(_)return d?p:lt(m=>(d=m,n&&(bt({id:n.id+"F",count:0}),n=void 0),t.fallback),h)})})}})}const sa=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],ia=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...sa]),oa=new Set(["innerHTML","textContent","innerText","children"]),aa=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),la=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function ca(t,e){const r=la[t];return typeof r=="object"?r[e]?r.$:void 0:r}const ua=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),ha=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),da={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function fa(t,e,r){let n=r.length,s=e.length,i=n,o=0,a=0,l=e[s-1].nextSibling,c=null;for(;o<s||a<i;){if(e[o]===r[a]){o++,a++;continue}for(;e[s-1]===r[i-1];)s--,i--;if(s===o){const u=i<n?a?r[a-1].nextSibling:r[i-a]:l;for(;a<i;)t.insertBefore(r[a++],u)}else if(i===a)for(;o<s;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===r[i-1]&&r[a]===e[s-1]){const u=e[--s].nextSibling;t.insertBefore(r[a++],e[o++].nextSibling),t.insertBefore(r[--i],u),e[s]=r[i]}else{if(!c){c=new Map;let h=a;for(;h<i;)c.set(r[h],h++)}const u=c.get(e[o]);if(u!=null)if(a<u&&u<i){let h=o,f=1,d;for(;++h<s&&h<i&&!((d=c.get(e[h]))==null||d!==u+f);)f++;if(f>u-a){const g=e[o];for(;a<u;)t.insertBefore(r[a++],g)}else t.replaceChild(r[a++],e[o++])}else o++;else e[o++].remove()}}}const zn="_$DX_DELEGATE";function ga(t,e,r,n={}){let s;return lt(i=>{s=i,e===document?t():S(e,t(),e.firstChild?null:void 0,r)},n.owner),()=>{s(),e.textContent=""}}function j(t,e,r,n){let s;const i=()=>{const a=document.createElement("template");return a.innerHTML=t,a.content.firstChild},o=()=>(s||(s=i())).cloneNode(!0);return o.cloneNode=o,o}function pt(t,e=window.document){const r=e[zn]||(e[zn]=new Set);for(let n=0,s=t.length;n<s;n++){const i=t[n];r.has(i)||(r.add(i),e.addEventListener(i,Sa))}}function ht(t,e,r){Ke(t)||(r==null?t.removeAttribute(e):t.setAttribute(e,r))}function pa(t,e,r,n){Ke(t)||(n==null?t.removeAttributeNS(e,r):t.setAttributeNS(e,r,n))}function ma(t,e,r){Ke(t)||(r?t.setAttribute(e,""):t.removeAttribute(e))}function Dt(t,e){Ke(t)||(e==null?t.removeAttribute("class"):t.className=e)}function ei(t,e,r,n){if(n)Array.isArray(r)?(t[`$$${e}`]=r[0],t[`$$${e}Data`]=r[1]):t[`$$${e}`]=r;else if(Array.isArray(r)){const s=r[0];t.addEventListener(e,r[0]=i=>s.call(t,r[1],i))}else t.addEventListener(e,r,typeof r!="function"&&r)}function va(t,e,r={}){const n=Object.keys(e||{}),s=Object.keys(r);let i,o;for(i=0,o=s.length;i<o;i++){const a=s[i];!a||a==="undefined"||e[a]||(Bn(t,a,!1),delete r[a])}for(i=0,o=n.length;i<o;i++){const a=n[i],l=!!e[a];!a||a==="undefined"||r[a]===l||!l||(Bn(t,a,!0),r[a]=l)}return r}function _a(t,e,r){if(!e)return r?ht(t,"style"):e;const n=t.style;if(typeof e=="string")return n.cssText=e;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),e||(e={});let s,i;for(i in r)e[i]==null&&n.removeProperty(i),delete r[i];for(i in e)s=e[i],s!==r[i]&&(n.setProperty(i,s),r[i]=s);return r}function dt(t,e={},r,n){const s={};return n||J(()=>s.children=At(t,e.children,s.children)),J(()=>typeof e.ref=="function"&&ti(e.ref,t)),J(()=>wa(t,e,r,!0,s,!0)),s}function ti(t,e,r){return le(()=>t(e,r))}function S(t,e,r,n){if(r!==void 0&&!n&&(n=[]),typeof e!="function")return At(t,e,n,r);J(s=>At(t,e(),s,r),n)}function wa(t,e,r,n,s={},i=!1){e||(e={});for(const o in s)if(!(o in e)){if(o==="children")continue;s[o]=Mn(t,o,null,s[o],r,i,e)}for(const o in e){if(o==="children")continue;const a=e[o];s[o]=Mn(t,o,a,s[o],r,i,e)}}function ya(t){let e,r;return!Ke()||!(e=A.registry.get(r=ka()))?t():(A.completed&&A.completed.add(e),A.registry.delete(r),e)}function Ke(t){return!!A.context&&!A.done&&(!t||t.isConnected)}function ba(t){return t.toLowerCase().replace(/-([a-z])/g,(e,r)=>r.toUpperCase())}function Bn(t,e,r){const n=e.trim().split(/\s+/);for(let s=0,i=n.length;s<i;s++)t.classList.toggle(n[s],r)}function Mn(t,e,r,n,s,i,o){let a,l,c,u,h;if(e==="style")return _a(t,r,n);if(e==="classList")return va(t,r,n);if(r===n)return n;if(e==="ref")i||r(t);else if(e.slice(0,3)==="on:"){const f=e.slice(3);n&&t.removeEventListener(f,n,typeof n!="function"&&n),r&&t.addEventListener(f,r,typeof r!="function"&&r)}else if(e.slice(0,10)==="oncapture:"){const f=e.slice(10);n&&t.removeEventListener(f,n,!0),r&&t.addEventListener(f,r,!0)}else if(e.slice(0,2)==="on"){const f=e.slice(2).toLowerCase(),d=ua.has(f);if(!d&&n){const g=Array.isArray(n)?n[0]:n;t.removeEventListener(f,g)}(d||r)&&(ei(t,f,r,d),d&&pt([f]))}else if(e.slice(0,5)==="attr:")ht(t,e.slice(5),r);else if(e.slice(0,5)==="bool:")ma(t,e.slice(5),r);else if((h=e.slice(0,5)==="prop:")||(c=oa.has(e))||!s&&((u=ca(e,t.tagName))||(l=ia.has(e)))||(a=t.nodeName.includes("-")||"is"in o)){if(h)e=e.slice(5),l=!0;else if(Ke(t))return r;e==="class"||e==="className"?Dt(t,r):a&&!l&&!c?t[ba(e)]=r:t[u||e]=r}else{const f=s&&e.indexOf(":")>-1&&da[e.split(":")[0]];f?pa(t,f,e,r):ht(t,aa[e]||e,r)}return r}function Sa(t){if(A.registry&&A.events&&A.events.find(([l,c])=>c===t))return;let e=t.target;const r=`$$${t.type}`,n=t.target,s=t.currentTarget,i=l=>Object.defineProperty(t,"target",{configurable:!0,value:l}),o=()=>{const l=e[r];if(l&&!e.disabled){const c=e[`${r}Data`];if(c!==void 0?l.call(e,c,t):l.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},a=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),A.registry&&!A.done&&(A.done=_$HY.done=!0),t.composedPath){const l=t.composedPath();i(l[0]);for(let c=0;c<l.length-2&&(e=l[c],!!o());c++){if(e._$host){e=e._$host,a();break}if(e.parentNode===s)break}}else a();i(n)}function At(t,e,r,n,s){const i=Ke(t);if(i){!r&&(r=[...t.childNodes]);let l=[];for(let c=0;c<r.length;c++){const u=r[c];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():l.push(u)}r=l}for(;typeof r=="function";)r=r();if(e===r)return r;const o=typeof e,a=n!==void 0;if(t=a&&r[0]&&r[0].parentNode||t,o==="string"||o==="number"){if(i||o==="number"&&(e=e.toString(),e===r))return r;if(a){let l=r[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),r=Ye(t,r,n,l)}else r!==""&&typeof r=="string"?r=t.firstChild.data=e:r=t.textContent=e}else if(e==null||o==="boolean"){if(i)return r;r=Ye(t,r,n)}else{if(o==="function")return J(()=>{let l=e();for(;typeof l=="function";)l=l();r=At(t,l,r,n)}),()=>r;if(Array.isArray(e)){const l=[],c=r&&Array.isArray(r);if(zr(l,e,r,s))return J(()=>r=At(t,l,r,n,!0)),()=>r;if(i){if(!l.length)return r;if(n===void 0)return r=[...t.childNodes];let u=l[0];if(u.parentNode!==t)return r;const h=[u];for(;(u=u.nextSibling)!==n;)h.push(u);return r=h}if(l.length===0){if(r=Ye(t,r,n),a)return r}else c?r.length===0?Fn(t,l,n):fa(t,r,l):(r&&Ye(t),Fn(t,l));r=l}else if(e.nodeType){if(i&&e.parentNode)return r=a?[e]:e;if(Array.isArray(r)){if(a)return r=Ye(t,r,n,e);Ye(t,r,null,e)}else r==null||r===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);r=e}}return r}function zr(t,e,r,n){let s=!1;for(let i=0,o=e.length;i<o;i++){let a=e[i],l=r&&r[t.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)t.push(a);else if(Array.isArray(a))s=zr(t,a,l)||s;else if(c==="function")if(n){for(;typeof a=="function";)a=a();s=zr(t,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||s}else t.push(a),s=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?t.push(l):t.push(document.createTextNode(u))}}return s}function Fn(t,e,r=null){for(let n=0,s=e.length;n<s;n++)t.insertBefore(e[n],r)}function Ye(t,e,r,n){if(r===void 0)return t.textContent="";const s=n||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(s!==a){const l=a.parentNode===t;!i&&!o?l?t.replaceChild(s,a):t.insertBefore(s,r):l&&a.remove()}else i=!0}}else t.insertBefore(s,r);return[s]}function ka(){return A.getNextContextId()}const Ea=()=>{},ri=!1,$a="http://www.w3.org/2000/svg";function Ta(t,e=!1){return e?document.createElementNS($a,t):document.createElement(t)}function Oa(t,e){const r=I(t);return I(()=>{const n=r();switch(typeof n){case"function":return le(()=>n(e));case"string":const s=ha.has(n),i=A.context?ya():Ta(n,s);return dt(i,e,s),i}})}function Ca(t){const[,e]=dn(t,["component"]);return Oa(()=>t.component,e)}function ni(){let t=new Set;function e(s){return t.add(s),()=>t.delete(s)}let r=!1;function n(s,i){if(r)return!(r=!1);const o={to:s,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of t)a.listener({...o,from:a.location,retry:l=>{l&&(r=!0),a.navigate(s,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:n}}let Br;function fn(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Br=window.history.state._depth}fn();function Aa(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Pa(t,e){let r=!1;return()=>{const n=Br;fn();const s=n==null?null:Br-n;if(r){r=!1;return}s&&e(s)?(r=!0,window.history.go(-s)):t()}}const xa=/^(?:[a-z0-9]+:)?\/\//i,Ra=/^\/+|(\/)\/+$/g,si="http://sr";function Fe(t,e=!1){const r=t.replace(Ra,"$1");return r?e||/^[?#]/.test(r)?r:"/"+r:""}function rr(t,e,r){if(xa.test(e))return;const n=Fe(t),s=r&&Fe(r);let i="";return!s||e.startsWith("/")?i=n:s.toLowerCase().indexOf(n.toLowerCase())!==0?i=n+s:i=s,(i||"/")+Fe(e,!i)}function Ia(t,e){if(t==null)throw new Error(e);return t}function ja(t,e){return Fe(t).replace(/\/*(\*.*)?$/g,"")+Fe(e)}function ii(t){const e={};return t.searchParams.forEach((r,n)=>{n in e?Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]:e[n]=r}),e}function Ua(t,e,r){const[n,s]=t.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&s===void 0&&!e)return null;const u={path:o?"":"/",params:{}},h=f=>r===void 0?void 0:r[f];for(let f=0;f<o;f++){const d=i[f],g=d[0]===":",p=g?l[f]:l[f].toLowerCase(),v=g?d.slice(1):d.toLowerCase();if(g&&Er(p,h(v)))u.params[v]=p;else if(g||!Er(p,v))return null;u.path+=`/${p}`}if(s){const f=c?l.slice(-c).join("/"):"";if(Er(f,h(s)))u.params[s]=f;else return null}return u}}function Er(t,e){const r=n=>n===t;return e===void 0?!0:typeof e=="string"?r(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(r):e instanceof RegExp?e.test(t):!1}function Na(t){const[e,r]=t.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce((s,i)=>s+(i.startsWith(":")?2:3),n.length-(r===void 0?0:1))}function oi(t){const e=new Map,r=un();return new Proxy({},{get(n,s){return e.has(s)||Ks(r,()=>e.set(s,I(()=>t()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function ai(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let r=t.slice(0,e.index),n=t.slice(e.index+e[0].length);const s=[r,r+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)s.push(r+=e[1]),n=n.slice(e[0].length);return ai(n).reduce((i,o)=>[...i,...s.map(a=>a+o)],[])}const Da=100,li=Se(),gn=Se(),pr=()=>Ia(ve(li),"<A> and 'use' router primitives can be only used inside a Route."),La=()=>ve(gn)||pr().base,za=t=>{const e=La();return I(()=>e.resolvePath(t()))},Ba=t=>{const e=pr();return I(()=>{const r=t();return r!==void 0?e.renderPath(r):r})},pn=()=>pr().navigatorFactory(),Ma=()=>pr().location;function Fa(t,e=""){const{component:r,preload:n,load:s,children:i,info:o}=t,a=!i||Array.isArray(i)&&!i.length,l={key:t,component:r,preload:n||s,info:o};return ci(t.path).reduce((c,u)=>{for(const h of ai(u)){const f=ja(e,h);let d=a?f:f.split("/*",1)[0];d=d.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),c.push({...l,originalPath:u,pattern:d,matcher:Ua(d,!a,t.matchFilters)})}return c},[])}function qa(t,e=0){return{routes:t,score:Na(t[t.length-1])*1e4-e,matcher(r){const n=[];for(let s=t.length-1;s>=0;s--){const i=t[s],o=i.matcher(r);if(!o)return null;n.unshift({...o,route:i})}return n}}}function ci(t){return Array.isArray(t)?t:[t]}function ui(t,e="",r=[],n=[]){const s=ci(t);for(let i=0,o=s.length;i<o;i++){const a=s[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Fa(a,e);for(const c of l){r.push(c);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)ui(a.children,c.pattern,r,n);else{const h=qa([...r],n.length);n.push(h)}r.pop()}}}return r.length?n:n.sort((i,o)=>o.score-i.score)}function $r(t,e){for(let r=0,n=t.length;r<n;r++){const s=t[r].matcher(e);if(s)return s}return[]}function Za(t,e,r){const n=new URL(si),s=I(u=>{const h=t();try{return new URL(h,n)}catch{return console.error(`Invalid path ${h}`),u}},n,{equals:(u,h)=>u.href===h.href}),i=I(()=>s().pathname),o=I(()=>s().search,!0),a=I(()=>s().hash),l=()=>"",c=cn(o,()=>ii(s()));return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return e()},get key(){return l()},query:r?r(c):oi(c)}}let De;function Va(){return De}function Wa(t,e,r,n={}){const{signal:[s,i],utils:o={}}=t,a=o.parsePath||(D=>D),l=o.renderPath||(D=>D),c=o.beforeLeave||ni(),u=rr("",n.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[h,f]=L(!1);let d;const g=(D,F)=>{F.value===p()&&F.state===y()||(d===void 0&&f(!0),De=D,d=F,qo(()=>{d===F&&(v(d.value),_(d.state),ta(),$[1](ie=>ie.filter(Te=>Te.pending)))}).finally(()=>{d===F&&Mo(()=>{De=void 0,D==="navigate"&&z(d),f(!1),d=void 0})}))},[p,v]=L(s().value),[y,_]=L(s().state),m=Za(p,y,o.queryWrapper),b=[],$=L([]),C=I(()=>typeof n.transformUrl=="function"?$r(e(),n.transformUrl(m.pathname)):$r(e(),m.pathname)),N=()=>{const D=C(),F={};for(let ie=0;ie<D.length;ie++)Object.assign(F,D[ie].params);return F},Q=o.paramsWrapper?o.paramsWrapper(N,e):oi(N),H={pattern:u,path:()=>u,outlet:()=>null,resolvePath(D){return rr(u,D)}};return J(cn(s,D=>g("native",D),{defer:!0})),{base:H,location:m,params:Q,isRouting:h,renderPath:l,parsePath:a,navigatorFactory:U,matches:C,beforeLeave:c,preloadRoute:ce,singleFlight:n.singleFlight===void 0?!0:n.singleFlight,submissions:$};function M(D,F,ie){le(()=>{if(typeof F=="number"){F&&(o.go?o.go(F):console.warn("Router integration does not support relative routing"));return}const Te=!F||F[0]==="?",{replace:Je,resolve:Ee,scroll:be,state:Re}={replace:!1,resolve:!Te,scroll:!0,...ie},Ie=Ee?D.resolvePath(F):rr(Te&&m.pathname||"",F);if(Ie===void 0)throw new Error(`Path '${F}' is not a routable path`);if(b.length>=Da)throw new Error("Too many redirects");const yt=p();(Ie!==yt||Re!==y())&&(ri||c.confirm(Ie,ie)&&(b.push({value:yt,replace:Je,scroll:be,state:y()}),g("navigate",{value:Ie,state:Re})))})}function U(D){return D=D||ve(gn)||H,(F,ie)=>M(D,F,ie)}function z(D){const F=b[0];F&&(i({...D,replace:F.replace,scroll:F.scroll}),b.length=0)}function ce(D,F){const ie=$r(e(),D.pathname),Te=De;De="preload";for(let Je in ie){const{route:Ee,params:be}=ie[Je];Ee.component&&Ee.component.preload&&Ee.component.preload();const{preload:Re}=Ee;F&&Re&&Ks(r(),()=>Re({params:be,location:{pathname:D.pathname,search:D.search,hash:D.hash,query:ii(D),state:null,key:""},intent:"preload"}))}De=Te}}function Ka(t,e,r,n){const{base:s,location:i,params:o}=t,{pattern:a,component:l,preload:c}=n().route,u=I(()=>n().path);l&&l.preload&&l.preload();const h=c?c({params:o,location:i,intent:De||"initial"}):void 0;return{parent:e,pattern:a,path:u,outlet:()=>l?w(l,{params:o,location:i,data:h,get children(){return r()}}):r(),resolvePath(d){return rr(s.path(),d,u())}}}const hi=t=>e=>{const{base:r}=e,n=hn(()=>e.children),s=I(()=>ui(n(),e.base||""));let i;const o=Wa(t,s,()=>i,{base:r,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(o),w(li.Provider,{value:o,get children(){return w(Ha,{routerState:o,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[I(()=>(i=un())&&null),w(Ga,{routerState:o,get branches(){return s()}})]}})}})};function Ha(t){const e=t.routerState.location,r=t.routerState.params,n=I(()=>t.preload&&le(()=>{t.preload({params:r,location:e,intent:Va()||"initial"})}));return w(de,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:s=>w(s,{params:r,location:e,get data(){return n()},get children(){return t.children}})})}function Ga(t){const e=[];let r;const n=I(cn(t.routerState.matches,(s,i,o)=>{let a=i&&s.length===i.length;const l=[];for(let c=0,u=s.length;c<u;c++){const h=i&&i[c],f=s[c];o&&h&&f.route.key===h.route.key?l[c]=o[c]:(a=!1,e[c]&&e[c](),lt(d=>{e[c]=d,l[c]=Ka(t.routerState,l[c-1]||t.routerState.base,qn(()=>n()[c+1]),()=>t.routerState.matches()[c])}))}return e.splice(s.length).forEach(c=>c()),o&&a?o:(r=l[0],l)}));return qn(()=>n()&&r)()}const qn=t=>()=>w(de,{get when(){return t()},keyed:!0,children:e=>w(gn.Provider,{value:e,get children(){return e.outlet()}})}),Qe=t=>{const e=hn(()=>t.children);return me(t,{get children(){return e()}})};function Ja([t,e],r,n){return[t,n?s=>e(n(s)):e]}function Ya(t){let e=!1;const r=s=>typeof s=="string"?{value:s}:s,n=Ja(L(r(t.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&t.set(s),A.registry&&!A.done&&(A.done=!0),s));return t.init&&We(t.init((s=t.get())=>{e=!0,n[1](r(s)),e=!1})),hi({signal:n,create:t.create,utils:t.utils})}function Qa(t,e,r){return t.addEventListener(e,r),()=>t.removeEventListener(e,r)}function Xa(t,e){const r=t&&document.getElementById(t);r?r.scrollIntoView():e&&window.scrollTo(0,0)}function el(t){const e=new URL(t);return e.pathname+e.search}function tl(t){let e;const r={value:t.url||(e=Ea())&&el(e.request.url)||""};return hi({signal:[()=>r,n=>Object.assign(r,n)]})(t)}const rl=new Map;function nl(t=!0,e=!1,r="/_server",n){return s=>{const i=s.base.path(),o=s.navigatorFactory(s.base);let a,l;function c(p){return p.namespaceURI==="http://www.w3.org/2000/svg"}function u(p){if(p.defaultPrevented||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey)return;const v=p.composedPath().find(C=>C instanceof Node&&C.nodeName.toUpperCase()==="A");if(!v||e&&!v.hasAttribute("link"))return;const y=c(v),_=y?v.href.baseVal:v.href;if((y?v.target.baseVal:v.target)||!_&&!v.hasAttribute("state"))return;const b=(v.getAttribute("rel")||"").split(/\s+/);if(v.hasAttribute("download")||b&&b.includes("external"))return;const $=y?new URL(_,document.baseURI):new URL(_);if(!($.origin!==window.location.origin||i&&$.pathname&&!$.pathname.toLowerCase().startsWith(i.toLowerCase())))return[v,$]}function h(p){const v=u(p);if(!v)return;const[y,_]=v,m=s.parsePath(_.pathname+_.search+_.hash),b=y.getAttribute("state");p.preventDefault(),o(m,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:b?JSON.parse(b):void 0})}function f(p){const v=u(p);if(!v)return;const[y,_]=v;n&&(_.pathname=n(_.pathname)),s.preloadRoute(_,y.getAttribute("preload")!=="false")}function d(p){clearTimeout(a);const v=u(p);if(!v)return l=null;const[y,_]=v;l!==y&&(n&&(_.pathname=n(_.pathname)),a=setTimeout(()=>{s.preloadRoute(_,y.getAttribute("preload")!=="false"),l=y},20))}function g(p){if(p.defaultPrevented)return;let v=p.submitter&&p.submitter.hasAttribute("formaction")?p.submitter.getAttribute("formaction"):p.target.getAttribute("action");if(!v)return;if(!v.startsWith("https://action/")){const _=new URL(v,si);if(v=s.parsePath(_.pathname+_.search),!v.startsWith(r))return}if(p.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=rl.get(v);if(y){p.preventDefault();const _=new FormData(p.target,p.submitter);y.call({r:s,f:p.target},p.target.enctype==="multipart/form-data"?_:new URLSearchParams(_))}}pt(["click","submit"]),document.addEventListener("click",h),t&&(document.addEventListener("mousemove",d,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",g),We(()=>{document.removeEventListener("click",h),t&&(document.removeEventListener("mousemove",d),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",g)})}}function sl(t){if(ri)return tl(t);const e=()=>{const n=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:n+window.location.hash,state:s}},r=ni();return Ya({get:e,set({value:n,replace:s,scroll:i,state:o}){s?window.history.replaceState(Aa(o),"",n):window.history.pushState(o,"",n),Xa(decodeURIComponent(window.location.hash.slice(1)),i),fn()},init:n=>Qa(window,"popstate",Pa(n,s=>{if(s&&s<0)return!r.confirm(s);{const i=e();return!r.confirm(i.value,{state:i.state})}})),create:nl(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:n=>window.history.go(n),beforeLeave:r}})(t)}var il=j("<a>");function ct(t){t=me({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=dn(t,["href","state","class","activeClass","inactiveClass","end"]),r=za(()=>t.href),n=Ba(r),s=Ma(),i=I(()=>{const o=r();if(o===void 0)return[!1,!1];const a=Fe(o.split(/[?#]/,1)[0]).toLowerCase(),l=decodeURI(Fe(s.pathname).toLowerCase());return[t.end?a===l:l.startsWith(a+"/")||l===a,a===l]});return(()=>{var o=il();return dt(o,me(e,{get href(){return n()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),o})()}function k(t,e,r){function n(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(t),e(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const s=r?.Parent??Object;class i extends s{}Object.defineProperty(i,"name",{value:t});function o(a){var l;const c=r?.Parent?new i:this;n(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>r?.Parent&&a instanceof r.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class Pt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const di={};function Ze(t){return di}function ol(t){const e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,s])=>e.indexOf(+n)===-1).map(([n,s])=>s)}function Mr(t,e){return typeof e=="bigint"?e.toString():e}function fi(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function mn(t){return t==null}function vn(t){const e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function Z(t,e,r){Object.defineProperty(t,e,{get(){{const n=r();return t[e]=n,n}},set(n){Object.defineProperty(t,e,{value:n})},configurable:!0})}function He(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function mt(...t){const e={};for(const r of t){const n=Object.getOwnPropertyDescriptors(r);Object.assign(e,n)}return Object.defineProperties({},e)}function Zn(t){return JSON.stringify(t)}const gi="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Fr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const al=fi(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function qr(t){if(Fr(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(Fr(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const ll=new Set(["string","number","symbol"]);function mr(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ge(t,e,r){const n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}function x(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function cl(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function ul(t,e){const r=t._zod.def,n=mt(t._zod.def,{get shape(){const s={};for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(s[i]=r.shape[i])}return He(this,"shape",s),s},checks:[]});return Ge(t,n)}function hl(t,e){const r=t._zod.def,n=mt(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete s[i]}return He(this,"shape",s),s},checks:[]});return Ge(t,n)}function dl(t,e){if(!qr(e))throw new Error("Invalid input to extend: expected a plain object");const r=mt(t._zod.def,{get shape(){const n={...t._zod.def.shape,...e};return He(this,"shape",n),n},checks:[]});return Ge(t,r)}function fl(t,e){const r=mt(t._zod.def,{get shape(){const n={...t._zod.def.shape,...e._zod.def.shape};return He(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return Ge(t,r)}function gl(t,e,r){const n=mt(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=t?new t({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=t?new t({type:"optional",innerType:s[o]}):s[o];return He(this,"shape",i),i},checks:[]});return Ge(e,n)}function pl(t,e,r){const n=mt(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new t({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new t({type:"nonoptional",innerType:s[o]});return He(this,"shape",i),i},checks:[]});return Ge(e,n)}function $t(t,e=0){for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function pi(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}function Ft(t){return typeof t=="string"?t:t?.message}function Ve(t,e,r){const n={...t,path:t.path??[]};if(!t.message){const s=Ft(t.inst?._zod.def?.error?.(t))??Ft(e?.error?.(t))??Ft(r.customError?.(t))??Ft(r.localeError?.(t))??"Invalid input";n.message=s}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}function _n(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function xt(...t){const[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}const mi=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Mr,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},vi=k("$ZodError",mi),_i=k("$ZodError",mi,{Parent:Error});function ml(t,e=r=>r.message){const r={},n=[];for(const s of t.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}function vl(t,e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(t),n}const _l=t=>(e,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=e._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new Pt;if(o.issues.length){const a=new(s?.Err??t)(o.issues.map(l=>Ve(l,i,Ze())));throw gi(a,s?.callee),a}return o.value},wl=t=>async(e,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=e._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new(s?.Err??t)(o.issues.map(l=>Ve(l,i,Ze())));throw gi(a,s?.callee),a}return o.value},wi=t=>(e,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new Pt;return i.issues.length?{success:!1,error:new(t??vi)(i.issues.map(o=>Ve(o,s,Ze())))}:{success:!0,data:i.value}},yl=wi(_i),yi=t=>async(e,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=e._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>Ve(o,s,Ze())))}:{success:!0,data:i.value}},bl=yi(_i),Sl=/^[cC][^\s-]{8,}$/,kl=/^[0-9a-z]+$/,El=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$l=/^[0-9a-vA-V]{20}$/,Tl=/^[A-Za-z0-9]{27}$/,Ol=/^[a-zA-Z0-9_-]{21}$/,Cl=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Al=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Vn=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Pl=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,xl="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Rl(){return new RegExp(xl,"u")}const Il=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jl=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Ul=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Nl=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Dl=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,bi=/^[A-Za-z0-9_-]*$/,Ll=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,zl=/^\+(?:[0-9]){6,14}[0-9]$/,Si="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Bl=new RegExp(`^${Si}$`);function ki(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Ml(t){return new RegExp(`^${ki(t)}$`)}function Fl(t){const e=ki({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${e}(?:${r.join("|")})`;return new RegExp(`^${Si}T(?:${n})$`)}const ql=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Zl=/^[^A-Z]*$/,Vl=/^[^a-z]*$/,ke=k("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),Wl=k("$ZodCheckMaxLength",(t,e)=>{var r;ke.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!mn(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{const s=n.value;if(s.length<=e.maximum)return;const o=_n(s);n.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),Kl=k("$ZodCheckMinLength",(t,e)=>{var r;ke.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!mn(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{const s=n.value;if(s.length>=e.minimum)return;const o=_n(s);n.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),Hl=k("$ZodCheckLengthEquals",(t,e)=>{var r;ke.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!mn(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=n=>{const s=n.value,i=s.length;if(i===e.length)return;const o=_n(s),a=i>e.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),vr=k("$ZodCheckStringFormat",(t,e)=>{var r,n;ke.init(t,e),t._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),Gl=k("$ZodCheckRegex",(t,e)=>{vr.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Jl=k("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=Zl),vr.init(t,e)}),Yl=k("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=Vl),vr.init(t,e)}),Ql=k("$ZodCheckIncludes",(t,e)=>{ke.init(t,e);const r=mr(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),Xl=k("$ZodCheckStartsWith",(t,e)=>{ke.init(t,e);const r=new RegExp(`^${mr(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),ec=k("$ZodCheckEndsWith",(t,e)=>{ke.init(t,e);const r=new RegExp(`.*${mr(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}}),tc=k("$ZodCheckOverwrite",(t,e)=>{ke.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});class rc{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const n=e.split(`
`).filter(o=>o),s=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,r=this?.args,s=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...r,s.join(`
`))}}const nc={major:4,minor:0,patch:13},Y=k("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=nc;const n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(const s of n)for(const i of s._zod.onattach)i(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(i,o,a)=>{let l=$t(i),c;for(const u of o){if(u._zod.def.when){if(!u._zod.def.when(i))continue}else if(l)continue;const h=i.issues.length,f=u._zod.check(i);if(f instanceof Promise&&a?.async===!1)throw new Pt;if(c||f instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await f,i.issues.length!==h&&(l||(l=$t(i,h)))});else{if(i.issues.length===h)continue;l||(l=$t(i,h))}}return c?c.then(()=>i):i};t._zod.run=(i,o)=>{const a=t._zod.parse(i,o);if(a instanceof Promise){if(o.async===!1)throw new Pt;return a.then(l=>s(l,n,o))}return s(a,n,o)}}t["~standard"]={validate:s=>{try{const i=yl(t,s);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return bl(t,s).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),wn=k("$ZodString",(t,e)=>{Y.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??ql(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),V=k("$ZodStringFormat",(t,e)=>{vr.init(t,e),wn.init(t,e)}),sc=k("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Al),V.init(t,e)}),ic=k("$ZodUUID",(t,e)=>{if(e.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Vn(n))}else e.pattern??(e.pattern=Vn());V.init(t,e)}),oc=k("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=Pl),V.init(t,e)}),ac=k("$ZodURL",(t,e)=>{V.init(t,e),t._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Ll.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),lc=k("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Rl()),V.init(t,e)}),cc=k("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Ol),V.init(t,e)}),uc=k("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Sl),V.init(t,e)}),hc=k("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=kl),V.init(t,e)}),dc=k("$ZodULID",(t,e)=>{e.pattern??(e.pattern=El),V.init(t,e)}),fc=k("$ZodXID",(t,e)=>{e.pattern??(e.pattern=$l),V.init(t,e)}),gc=k("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Tl),V.init(t,e)}),pc=k("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=Fl(e)),V.init(t,e)}),mc=k("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Bl),V.init(t,e)}),vc=k("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=Ml(e)),V.init(t,e)}),_c=k("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=Cl),V.init(t,e)}),wc=k("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Il),V.init(t,e),t._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),yc=k("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=jl),V.init(t,e),t._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),bc=k("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Ul),V.init(t,e)}),Sc=k("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Nl),V.init(t,e),t._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function Ei(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const kc=k("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=Dl),V.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),t._zod.check=r=>{Ei(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function Ec(t){if(!bi.test(t))return!1;const e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return Ei(r)}const $c=k("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=bi),V.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),t._zod.check=r=>{Ec(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),Tc=k("$ZodE164",(t,e)=>{e.pattern??(e.pattern=zl),V.init(t,e)});function Oc(t,e=null){try{const r=t.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const Cc=k("$ZodJWT",(t,e)=>{V.init(t,e),t._zod.check=r=>{Oc(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),Ac=k("$ZodUnknown",(t,e)=>{Y.init(t,e),t._zod.parse=r=>r}),Pc=k("$ZodNever",(t,e)=>{Y.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function Wn(t,e,r){t.issues.length&&e.issues.push(...pi(r,t.issues)),e.value[r]=t.value}const xc=k("$ZodArray",(t,e)=>{Y.init(t,e),t._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=e.element._zod.run({value:a,issues:[]},n);l instanceof Promise?i.push(l.then(c=>Wn(c,r,o))):Wn(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function qt(t,e,r,n){t.issues.length&&e.issues.push(...pi(r,t.issues)),t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}const Rc=k("$ZodObject",(t,e)=>{Y.init(t,e);const r=fi(()=>{const h=Object.keys(e.shape);for(const d of h)if(!(e.shape[d]instanceof Y))throw new Error(`Invalid element at key "${d}": expected a Zod schema`);const f=cl(e.shape);return{shape:e.shape,keys:h,keySet:new Set(h),numKeys:h.length,optionalKeys:new Set(f)}});Z(t._zod,"propValues",()=>{const h=e.shape,f={};for(const d in h){const g=h[d]._zod;if(g.values){f[d]??(f[d]=new Set);for(const p of g.values)f[d].add(p)}}return f});const n=h=>{const f=new rc(["shape","payload","ctx"]),d=r.value,g=_=>{const m=Zn(_);return`shape[${m}]._zod.run({ value: input[${m}], issues: [] }, ctx)`};f.write("const input = payload.value;");const p=Object.create(null);let v=0;for(const _ of d.keys)p[_]=`key_${v++}`;f.write("const newResult = {}");for(const _ of d.keys){const m=p[_],b=Zn(_);f.write(`const ${m} = ${g(_)};`),f.write(`
        if (${m}.issues.length) {
          payload.issues = payload.issues.concat(${m}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${b}, ...iss.path] : [${b}]
          })));
        }
        
        if (${m}.value === undefined) {
          if (${b} in input) {
            newResult[${b}] = undefined;
          }
        } else {
          newResult[${b}] = ${m}.value;
        }
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const y=f.compile();return(_,m)=>y(h,_,m)};let s;const i=Fr,o=!di.jitless,l=o&&al.value,c=e.catchall;let u;t._zod.parse=(h,f)=>{u??(u=r.value);const d=h.value;if(!i(d))return h.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),h;const g=[];if(o&&l&&f?.async===!1&&f.jitless!==!0)s||(s=n(e.shape)),h=s(h,f);else{h.value={};const m=u.shape;for(const b of u.keys){const C=m[b]._zod.run({value:d[b],issues:[]},f);C instanceof Promise?g.push(C.then(N=>qt(N,h,b,d))):qt(C,h,b,d)}}if(!c)return g.length?Promise.all(g).then(()=>h):h;const p=[],v=u.keySet,y=c._zod,_=y.def.type;for(const m of Object.keys(d)){if(v.has(m))continue;if(_==="never"){p.push(m);continue}const b=y.run({value:d[m],issues:[]},f);b instanceof Promise?g.push(b.then($=>qt($,h,m,d))):qt(b,h,m,d)}return p.length&&h.issues.push({code:"unrecognized_keys",keys:p,input:d,inst:t}),g.length?Promise.all(g).then(()=>h):h}});function Kn(t,e,r,n){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const s=t.filter(i=>!$t(i));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(o=>Ve(o,n,Ze())))}),e)}const Ic=k("$ZodUnion",(t,e)=>{Y.init(t,e),Z(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Z(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Z(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),Z(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>vn(i.source)).join("|")})$`)}});const r=e.options.length===1,n=e.options[0]._zod.run;t._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const l of e.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>Kn(l,s,t,i)):Kn(a,s,t,i)}}),jc=k("$ZodIntersection",(t,e)=>{Y.init(t,e),t._zod.parse=(r,n)=>{const s=r.value,i=e.left._zod.run({value:s,issues:[]},n),o=e.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,c])=>Hn(r,l,c)):Hn(r,i,o)}});function Zr(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(qr(t)&&qr(e)){const r=Object.keys(e),n=Object.keys(t).filter(i=>r.indexOf(i)!==-1),s={...t,...e};for(const i of n){const o=Zr(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<t.length;n++){const s=t[n],i=e[n],o=Zr(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Hn(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),$t(t))return t;const n=Zr(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}const Uc=k("$ZodEnum",(t,e)=>{Y.init(t,e);const r=ol(e.entries),n=new Set(r);t._zod.values=n,t._zod.pattern=new RegExp(`^(${r.filter(s=>ll.has(typeof s)).map(s=>typeof s=="string"?mr(s):s.toString()).join("|")})$`),t._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:t}),s}}),Nc=k("$ZodTransform",(t,e)=>{Y.init(t,e),t._zod.parse=(r,n)=>{const s=e.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(r.value=o,r));if(s instanceof Promise)throw new Pt;return r.value=s,r}});function Gn(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Dc=k("$ZodOptional",(t,e)=>{Y.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Z(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Z(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${vn(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>Gn(i,r.value)):Gn(s,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,n)}}),Lc=k("$ZodNullable",(t,e)=>{Y.init(t,e),Z(t._zod,"optin",()=>e.innerType._zod.optin),Z(t._zod,"optout",()=>e.innerType._zod.optout),Z(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${vn(r.source)}|null)$`):void 0}),Z(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),zc=k("$ZodDefault",(t,e)=>{Y.init(t,e),t._zod.optin="optional",Z(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=e.defaultValue,r;const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>Jn(i,e)):Jn(s,e)}});function Jn(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const Bc=k("$ZodPrefault",(t,e)=>{Y.init(t,e),t._zod.optin="optional",Z(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),Mc=k("$ZodNonOptional",(t,e)=>{Y.init(t,e),Z(t._zod,"values",()=>{const r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>Yn(i,t)):Yn(s,t)}});function Yn(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const Fc=k("$ZodCatch",(t,e)=>{Y.init(t,e),Z(t._zod,"optin",()=>e.innerType._zod.optin),Z(t._zod,"optout",()=>e.innerType._zod.optout),Z(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(o=>Ve(o,n,Ze()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=e.catchValue({...r,error:{issues:s.issues.map(i=>Ve(i,n,Ze()))},input:r.value}),r.issues=[]),r)}}),qc=k("$ZodPipe",(t,e)=>{Y.init(t,e),Z(t._zod,"values",()=>e.in._zod.values),Z(t._zod,"optin",()=>e.in._zod.optin),Z(t._zod,"optout",()=>e.out._zod.optout),Z(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{const s=e.in._zod.run(r,n);return s instanceof Promise?s.then(i=>Qn(i,e,n)):Qn(s,e,n)}});function Qn(t,e,r){return t.issues.length?t:e.out._zod.run({value:t.value,issues:t.issues},r)}const Zc=k("$ZodReadonly",(t,e)=>{Y.init(t,e),Z(t._zod,"propValues",()=>e.innerType._zod.propValues),Z(t._zod,"values",()=>e.innerType._zod.values),Z(t._zod,"optin",()=>e.innerType._zod.optin),Z(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(r,n)=>{const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(Xn):Xn(s)}});function Xn(t){return t.value=Object.freeze(t.value),t}const Vc=k("$ZodCustom",(t,e)=>{ke.init(t,e),Y.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{const n=r.value,s=e.fn(n);if(s instanceof Promise)return s.then(i=>es(i,r,n,t));es(s,r,n,t)}});function es(t,e,r,n){if(!t){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),e.issues.push(xt(s))}}class Wc{constructor(){this._map=new Map,this._idmap=new Map}add(e,...r){const n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){const r=e._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Kc(){return new Wc}const Zt=Kc();function Hc(t,e){return new t({type:"string",...x(e)})}function Gc(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...x(e)})}function ts(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...x(e)})}function Jc(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...x(e)})}function Yc(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...x(e)})}function Qc(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...x(e)})}function Xc(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...x(e)})}function eu(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...x(e)})}function tu(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...x(e)})}function ru(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...x(e)})}function nu(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...x(e)})}function su(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...x(e)})}function iu(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...x(e)})}function ou(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...x(e)})}function au(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...x(e)})}function lu(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...x(e)})}function cu(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...x(e)})}function uu(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...x(e)})}function hu(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...x(e)})}function du(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...x(e)})}function fu(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...x(e)})}function gu(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...x(e)})}function pu(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...x(e)})}function mu(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...x(e)})}function vu(t,e){return new t({type:"string",format:"date",check:"string_format",...x(e)})}function _u(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...x(e)})}function wu(t,e){return new t({type:"string",format:"duration",check:"string_format",...x(e)})}function yu(t){return new t({type:"unknown"})}function bu(t,e){return new t({type:"never",...x(e)})}function $i(t,e){return new Wl({check:"max_length",...x(e),maximum:t})}function ar(t,e){return new Kl({check:"min_length",...x(e),minimum:t})}function Ti(t,e){return new Hl({check:"length_equals",...x(e),length:t})}function Su(t,e){return new Gl({check:"string_format",format:"regex",...x(e),pattern:t})}function ku(t){return new Jl({check:"string_format",format:"lowercase",...x(t)})}function Eu(t){return new Yl({check:"string_format",format:"uppercase",...x(t)})}function $u(t,e){return new Ql({check:"string_format",format:"includes",...x(e),includes:t})}function Tu(t,e){return new Xl({check:"string_format",format:"starts_with",...x(e),prefix:t})}function Ou(t,e){return new ec({check:"string_format",format:"ends_with",...x(e),suffix:t})}function Lt(t){return new tc({check:"overwrite",tx:t})}function Cu(t){return Lt(e=>e.normalize(t))}function Au(){return Lt(t=>t.trim())}function Pu(){return Lt(t=>t.toLowerCase())}function xu(){return Lt(t=>t.toUpperCase())}function Ru(t,e,r){return new t({type:"array",element:e,...x(r)})}function Iu(t,e,r){return new t({type:"custom",check:"custom",fn:e,...x(r)})}function ju(t){const e=Uu(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(xt(n,r.value,e._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),r.issues.push(xt(s))}},t(r.value,r)));return e}function Uu(t,e){const r=new ke({check:"custom",...x(e)});return r._zod.check=t,r}const Nu=k("ZodISODateTime",(t,e)=>{pc.init(t,e),K.init(t,e)});function Du(t){return mu(Nu,t)}const Lu=k("ZodISODate",(t,e)=>{mc.init(t,e),K.init(t,e)});function zu(t){return vu(Lu,t)}const Bu=k("ZodISOTime",(t,e)=>{vc.init(t,e),K.init(t,e)});function Mu(t){return _u(Bu,t)}const Fu=k("ZodISODuration",(t,e)=>{_c.init(t,e),K.init(t,e)});function qu(t){return wu(Fu,t)}const Zu=(t,e)=>{vi.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>vl(t,r)},flatten:{value:r=>ml(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,Mr,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,Mr,2)}},isEmpty:{get(){return t.issues.length===0}}})},_r=k("ZodError",Zu,{Parent:Error}),Vu=_l(_r),Wu=wl(_r),Ku=wi(_r),Hu=yi(_r),re=k("ZodType",(t,e)=>(Y.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone({...e,checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),t.clone=(r,n)=>Ge(t,r,n),t.brand=()=>t,t.register=(r,n)=>(r.add(t,n),t),t.parse=(r,n)=>Vu(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>Ku(t,r,n),t.parseAsync=async(r,n)=>Wu(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>Hu(t,r,n),t.spa=t.safeParseAsync,t.refine=(r,n)=>t.check(zh(r,n)),t.superRefine=r=>t.check(Bh(r)),t.overwrite=r=>t.check(Lt(r)),t.optional=()=>ss(t),t.nullable=()=>is(t),t.nullish=()=>ss(is(t)),t.nonoptional=r=>Rh(t,r),t.array=()=>vh(t),t.or=r=>bh([t,r]),t.and=r=>kh(t,r),t.transform=r=>os(t,Th(r)),t.default=r=>Ah(t,r),t.prefault=r=>xh(t,r),t.catch=r=>jh(t,r),t.pipe=r=>os(t,r),t.readonly=()=>Dh(t),t.describe=r=>{const n=t.clone();return Zt.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return Zt.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return Zt.get(t);const n=t.clone();return Zt.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Oi=k("_ZodString",(t,e)=>{wn.init(t,e),re.init(t,e);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(Su(...n)),t.includes=(...n)=>t.check($u(...n)),t.startsWith=(...n)=>t.check(Tu(...n)),t.endsWith=(...n)=>t.check(Ou(...n)),t.min=(...n)=>t.check(ar(...n)),t.max=(...n)=>t.check($i(...n)),t.length=(...n)=>t.check(Ti(...n)),t.nonempty=(...n)=>t.check(ar(1,...n)),t.lowercase=n=>t.check(ku(n)),t.uppercase=n=>t.check(Eu(n)),t.trim=()=>t.check(Au()),t.normalize=(...n)=>t.check(Cu(...n)),t.toLowerCase=()=>t.check(Pu()),t.toUpperCase=()=>t.check(xu())}),Gu=k("ZodString",(t,e)=>{wn.init(t,e),Oi.init(t,e),t.email=r=>t.check(Gc(Ju,r)),t.url=r=>t.check(eu(Yu,r)),t.jwt=r=>t.check(pu(dh,r)),t.emoji=r=>t.check(tu(Qu,r)),t.guid=r=>t.check(ts(rs,r)),t.uuid=r=>t.check(Jc(Vt,r)),t.uuidv4=r=>t.check(Yc(Vt,r)),t.uuidv6=r=>t.check(Qc(Vt,r)),t.uuidv7=r=>t.check(Xc(Vt,r)),t.nanoid=r=>t.check(ru(Xu,r)),t.guid=r=>t.check(ts(rs,r)),t.cuid=r=>t.check(nu(eh,r)),t.cuid2=r=>t.check(su(th,r)),t.ulid=r=>t.check(iu(rh,r)),t.base64=r=>t.check(du(ch,r)),t.base64url=r=>t.check(fu(uh,r)),t.xid=r=>t.check(ou(nh,r)),t.ksuid=r=>t.check(au(sh,r)),t.ipv4=r=>t.check(lu(ih,r)),t.ipv6=r=>t.check(cu(oh,r)),t.cidrv4=r=>t.check(uu(ah,r)),t.cidrv6=r=>t.check(hu(lh,r)),t.e164=r=>t.check(gu(hh,r)),t.datetime=r=>t.check(Du(r)),t.date=r=>t.check(zu(r)),t.time=r=>t.check(Mu(r)),t.duration=r=>t.check(qu(r))});function Tr(t){return Hc(Gu,t)}const K=k("ZodStringFormat",(t,e)=>{V.init(t,e),Oi.init(t,e)}),Ju=k("ZodEmail",(t,e)=>{oc.init(t,e),K.init(t,e)}),rs=k("ZodGUID",(t,e)=>{sc.init(t,e),K.init(t,e)}),Vt=k("ZodUUID",(t,e)=>{ic.init(t,e),K.init(t,e)}),Yu=k("ZodURL",(t,e)=>{ac.init(t,e),K.init(t,e)}),Qu=k("ZodEmoji",(t,e)=>{lc.init(t,e),K.init(t,e)}),Xu=k("ZodNanoID",(t,e)=>{cc.init(t,e),K.init(t,e)}),eh=k("ZodCUID",(t,e)=>{uc.init(t,e),K.init(t,e)}),th=k("ZodCUID2",(t,e)=>{hc.init(t,e),K.init(t,e)}),rh=k("ZodULID",(t,e)=>{dc.init(t,e),K.init(t,e)}),nh=k("ZodXID",(t,e)=>{fc.init(t,e),K.init(t,e)}),sh=k("ZodKSUID",(t,e)=>{gc.init(t,e),K.init(t,e)}),ih=k("ZodIPv4",(t,e)=>{wc.init(t,e),K.init(t,e)}),oh=k("ZodIPv6",(t,e)=>{yc.init(t,e),K.init(t,e)}),ah=k("ZodCIDRv4",(t,e)=>{bc.init(t,e),K.init(t,e)}),lh=k("ZodCIDRv6",(t,e)=>{Sc.init(t,e),K.init(t,e)}),ch=k("ZodBase64",(t,e)=>{kc.init(t,e),K.init(t,e)}),uh=k("ZodBase64URL",(t,e)=>{$c.init(t,e),K.init(t,e)}),hh=k("ZodE164",(t,e)=>{Tc.init(t,e),K.init(t,e)}),dh=k("ZodJWT",(t,e)=>{Cc.init(t,e),K.init(t,e)}),fh=k("ZodUnknown",(t,e)=>{Ac.init(t,e),re.init(t,e)});function ns(){return yu(fh)}const gh=k("ZodNever",(t,e)=>{Pc.init(t,e),re.init(t,e)});function ph(t){return bu(gh,t)}const mh=k("ZodArray",(t,e)=>{xc.init(t,e),re.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(ar(r,n)),t.nonempty=r=>t.check(ar(1,r)),t.max=(r,n)=>t.check($i(r,n)),t.length=(r,n)=>t.check(Ti(r,n)),t.unwrap=()=>t.element});function vh(t,e){return Ru(mh,t,e)}const _h=k("ZodObject",(t,e)=>{Rc.init(t,e),re.init(t,e),Z(t,"shape",()=>e.shape),t.keyof=()=>Eh(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:ns()}),t.loose=()=>t.clone({...t._zod.def,catchall:ns()}),t.strict=()=>t.clone({...t._zod.def,catchall:ph()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>dl(t,r),t.merge=r=>fl(t,r),t.pick=r=>ul(t,r),t.omit=r=>hl(t,r),t.partial=(...r)=>gl(Ci,t,r[0]),t.required=(...r)=>pl(Ai,t,r[0])});function wh(t,e){const r={type:"object",get shape(){return He(this,"shape",{...t}),this.shape},...x(e)};return new _h(r)}const yh=k("ZodUnion",(t,e)=>{Ic.init(t,e),re.init(t,e),t.options=e.options});function bh(t,e){return new yh({type:"union",options:t,...x(e)})}const Sh=k("ZodIntersection",(t,e)=>{jc.init(t,e),re.init(t,e)});function kh(t,e){return new Sh({type:"intersection",left:t,right:e})}const Vr=k("ZodEnum",(t,e)=>{Uc.init(t,e),re.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const r=new Set(Object.keys(e.entries));t.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Vr({...e,checks:[],...x(s),entries:i})},t.exclude=(n,s)=>{const i={...e.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Vr({...e,checks:[],...x(s),entries:i})}});function Eh(t,e){const r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new Vr({type:"enum",entries:r,...x(e)})}const $h=k("ZodTransform",(t,e)=>{Nc.init(t,e),re.init(t,e),t._zod.parse=(r,n)=>{r.addIssue=i=>{if(typeof i=="string")r.issues.push(xt(i,r.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=t),r.issues.push(xt(o))}};const s=e.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function Th(t){return new $h({type:"transform",transform:t})}const Ci=k("ZodOptional",(t,e)=>{Dc.init(t,e),re.init(t,e),t.unwrap=()=>t._zod.def.innerType});function ss(t){return new Ci({type:"optional",innerType:t})}const Oh=k("ZodNullable",(t,e)=>{Lc.init(t,e),re.init(t,e),t.unwrap=()=>t._zod.def.innerType});function is(t){return new Oh({type:"nullable",innerType:t})}const Ch=k("ZodDefault",(t,e)=>{zc.init(t,e),re.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Ah(t,e){return new Ch({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const Ph=k("ZodPrefault",(t,e)=>{Bc.init(t,e),re.init(t,e),t.unwrap=()=>t._zod.def.innerType});function xh(t,e){return new Ph({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const Ai=k("ZodNonOptional",(t,e)=>{Mc.init(t,e),re.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Rh(t,e){return new Ai({type:"nonoptional",innerType:t,...x(e)})}const Ih=k("ZodCatch",(t,e)=>{Fc.init(t,e),re.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function jh(t,e){return new Ih({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const Uh=k("ZodPipe",(t,e)=>{qc.init(t,e),re.init(t,e),t.in=e.in,t.out=e.out});function os(t,e){return new Uh({type:"pipe",in:t,out:e})}const Nh=k("ZodReadonly",(t,e)=>{Zc.init(t,e),re.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Dh(t){return new Nh({type:"readonly",innerType:t})}const Lh=k("ZodCustom",(t,e)=>{Vc.init(t,e),re.init(t,e)});function zh(t,e={}){return Iu(Lh,t,e)}function Bh(t){return ju(t)}const Mh={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_LOGIN_REDIRECT_URL:"https://trevisorifiuti.top",VITE_SUPABASE_PUBLISHABLE_DEFAULT_KEY:"sb_publishable_Ni2Pi8n1G85jimkFj18IWA_fXJmAUk2",VITE_SUPABASE_URL:"https://xracoszqwzvretfrjgyr.supabase.co"},Fh=wh({VITE_SUPABASE_URL:Tr(),VITE_SUPABASE_PUBLISHABLE_DEFAULT_KEY:Tr(),VITE_LOGIN_REDIRECT_URL:Tr()});function qh(){const t=Fh.parse(Mh);return{supabase:{url:t.VITE_SUPABASE_URL,anonKey:t.VITE_SUPABASE_PUBLISHABLE_DEFAULT_KEY},login:{rediectUrl:t.VITE_LOGIN_REDIRECT_URL}}}const Pi=Se(),Zh=t=>{const e=qh();return w(Pi.Provider,{value:{config:e},get children(){return t.children}})},xi=()=>{const t=ve(Pi);if(!t)throw new Error("useConfig must be used within a ConfigProvider");return t.config};var Wr=function(t,e){return Wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Wr(t,e)};function Ri(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var lr=function(){return lr=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},lr.apply(this,arguments)};function vt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Ii(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function ji(t,e){return function(r,n){e(r,n,t)}}function Ui(t,e,r,n,s,i){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h,f=!1,d=r.length-1;d>=0;d--){var g={};for(var p in n)g[p]=p==="access"?{}:n[p];for(var p in n.access)g.access[p]=n.access[p];g.addInitializer=function(y){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(y||null))};var v=(0,r[d])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(h=o(v.get))&&(u.get=h),(h=o(v.set))&&(u.set=h),(h=o(v.init))&&s.unshift(h)}else(h=o(v))&&(a==="field"?s.unshift(h):u[l]=h)}c&&Object.defineProperty(c,n.name,u),f=!0}function Ni(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function Di(t){return typeof t=="symbol"?t:"".concat(t)}function Li(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function zi(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function T(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function Bi(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var wr=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Mi(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wr(e,t,r)}function cr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yn(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function Fi(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(yn(arguments[e]));return t}function qi(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Zi(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function ft(t){return this instanceof ft?(this.v=t,this):new ft(t)}function Vi(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(d){return function(g){return Promise.resolve(g).then(d,h)}}function a(d,g){n[d]&&(s[d]=function(p){return new Promise(function(v,y){i.push([d,p,v,y])>1||l(d,p)})},g&&(s[d]=g(s[d])))}function l(d,g){try{c(n[d](g))}catch(p){f(i[0][3],p)}}function c(d){d.value instanceof ft?Promise.resolve(d.value.v).then(u,h):f(i[0][2],d)}function u(d){l("next",d)}function h(d){l("throw",d)}function f(d,g){d(g),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Wi(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:ft(t[s](o)),done:!1}:i?i(o):o}:i}}function Ki(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof cr=="function"?cr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function Hi(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Vh=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Kr=function(t){return Kr=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Kr(t)};function Gi(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Kr(t),n=0;n<r.length;n++)r[n]!=="default"&&wr(e,t,r[n]);return Vh(e,t),e}function Ji(t){return t&&t.__esModule?t:{default:t}}function Yi(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Qi(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function Xi(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function eo(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var Wh=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function to(t){function e(i){t.error=t.hasError?new Wh(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function ro(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?e?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):t}const Kh={__extends:Ri,__assign:lr,__rest:vt,__decorate:Ii,__param:ji,__esDecorate:Ui,__runInitializers:Ni,__propKey:Di,__setFunctionName:Li,__metadata:zi,__awaiter:T,__generator:Bi,__createBinding:wr,__exportStar:Mi,__values:cr,__read:yn,__spread:Fi,__spreadArrays:qi,__spreadArray:Zi,__await:ft,__asyncGenerator:Vi,__asyncDelegator:Wi,__asyncValues:Ki,__makeTemplateObject:Hi,__importStar:Gi,__importDefault:Ji,__classPrivateFieldGet:Yi,__classPrivateFieldSet:Qi,__classPrivateFieldIn:Xi,__addDisposableResource:eo,__disposeResources:to,__rewriteRelativeImportExtension:ro},Hh=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:eo,get __assign(){return lr},__asyncDelegator:Wi,__asyncGenerator:Vi,__asyncValues:Ki,__await:ft,__awaiter:T,__classPrivateFieldGet:Yi,__classPrivateFieldIn:Xi,__classPrivateFieldSet:Qi,__createBinding:wr,__decorate:Ii,__disposeResources:to,__esDecorate:Ui,__exportStar:Mi,__extends:Ri,__generator:Bi,__importDefault:Ji,__importStar:Gi,__makeTemplateObject:Hi,__metadata:zi,__param:ji,__propKey:Di,__read:yn,__rest:vt,__rewriteRelativeImportExtension:ro,__runInitializers:Ni,__setFunctionName:Li,__spread:Fi,__spreadArray:Zi,__spreadArrays:qi,__values:cr,default:Kh},Symbol.toStringTag,{value:"Module"})),Gh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class bn extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Jh extends bn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class as extends bn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ls extends bn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Hr||(Hr={}));class Yh{constructor(e,{headers:r={},customFetch:n,region:s=Hr.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Gh(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return T(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:h}=n;let f={},{region:d}=n;d||(d=this.region);const g=new URL(`${this.url}/${r}`);d&&d!=="any"&&(f["x-region"]=d,g.searchParams.set("forceFunctionRegion",d));let p;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",p=c):typeof c=="string"?(f["Content-Type"]="text/plain",p=c):typeof FormData<"u"&&c instanceof FormData?p=c:(f["Content-Type"]="application/json",p=JSON.stringify(c)):p=c;let v=u;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),u?(v=o.signal,u.addEventListener("abort",()=>o.abort())):v=o.signal);const y=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:p,signal:v}).catch($=>{throw new Jh($)}),_=y.headers.get("x-relay-error");if(_&&_==="true")throw new as(y);if(!y.ok)throw new ls(y);let m=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return m==="application/json"?b=yield y.json():m==="application/octet-stream"||m==="application/pdf"?b=yield y.blob():m==="text/event-stream"?b=y:m==="multipart/form-data"?b=yield y.formData():b=yield y.text(),{data:b,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof ls||a instanceof as?a.context:void 0}}finally{i&&clearTimeout(i)}})}}function Qh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xh(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var oe={};const _t=Xh(Hh);var Wt={},Kt={},Ht={},Gt={},Jt={},Yt={},cs;function no(){if(cs)return Yt;cs=1,Object.defineProperty(Yt,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Yt.default=t,Yt}var us;function so(){if(us)return Jt;us=1,Object.defineProperty(Jt,"__esModule",{value:!0});const e=_t.__importDefault(no());class r{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,h,f;let d=null,g=null,p=null,v=l.status,y=l.statusText;if(l.ok){if(this.method!=="HEAD"){const $=await l.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?g=$:g=JSON.parse($))}const m=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),b=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");m&&b&&b.length>1&&(p=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(d={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,p=null,v=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const m=await l.text();try{d=JSON.parse(m),Array.isArray(d)&&l.status===404&&(g=[],d=null,v=200,y="OK")}catch{l.status===404&&m===""?(v=204,y="No Content"):d={message:m}}if(d&&this.isMaybeSingle&&(!((f=d?.details)===null||f===void 0)&&f.includes("0 rows"))&&(d=null,v=200,y="OK"),d&&this.shouldThrowOnError)throw new e.default(d)}return{error:d,data:g,count:p,status:v,statusText:y}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,u,h;return{error:{message:`${(c=l?.name)!==null&&c!==void 0?c:"FetchError"}: ${l?.message}`,details:`${(u=l?.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=l?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}}return Jt.default=r,Jt}var hs;function io(){if(hs)return Gt;hs=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e=_t.__importDefault(so());class r extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Gt.default=r,Gt}var ds;function Sn(){if(ds)return Ht;ds=1,Object.defineProperty(Ht,"__esModule",{value:!0});const e=_t.__importDefault(io()),r=new RegExp("[,()]");class n extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return Ht.default=n,Ht}var fs;function oo(){if(fs)return Kt;fs=1,Object.defineProperty(Kt,"__esModule",{value:!0});const e=_t.__importDefault(Sn());class r{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(h.length>0){const f=[...new Set(h)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Kt.default=r,Kt}var gs;function ed(){if(gs)return Wt;gs=1,Object.defineProperty(Wt,"__esModule",{value:!0});const t=_t,e=t.__importDefault(oo()),r=t.__importDefault(Sn());class n{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let h;const f=new URL(`${this.url}/rpc/${i}`);let d;a||l?(h=a?"HEAD":"GET",Object.entries(o).filter(([p,v])=>v!==void 0).map(([p,v])=>[p,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([p,v])=>{f.searchParams.append(p,v)})):(h="POST",d=o);const g=new Headers(this.headers);return c&&g.set("Prefer",`count=${c}`),new r.default({method:h,url:f,headers:g,schema:this.schemaName,body:d,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Wt.default=n,Wt}var ps;function td(){if(ps)return oe;ps=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.PostgrestError=oe.PostgrestBuilder=oe.PostgrestTransformBuilder=oe.PostgrestFilterBuilder=oe.PostgrestQueryBuilder=oe.PostgrestClient=void 0;const t=_t,e=t.__importDefault(ed());oe.PostgrestClient=e.default;const r=t.__importDefault(oo());oe.PostgrestQueryBuilder=r.default;const n=t.__importDefault(Sn());oe.PostgrestFilterBuilder=n.default;const s=t.__importDefault(io());oe.PostgrestTransformBuilder=s.default;const i=t.__importDefault(so());oe.PostgrestBuilder=i.default;const o=t.__importDefault(no());return oe.PostgrestError=o.default,oe.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},oe}var ao=td();const lo=Qh(ao),rd=Uo({__proto__:null,default:lo},[ao]),{PostgrestClient:nd,PostgrestQueryBuilder:pm,PostgrestFilterBuilder:mm,PostgrestTransformBuilder:vm,PostgrestBuilder:_m,PostgrestError:wm}=lo||rd;class sd{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const id="2.81.1",od=`realtime-js/${id}`,co="1.0.0",ad="2.0.0",ms=co,Gr=1e4,ld=1e3,cd=100;var Le;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Le||(Le={}));var X;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(X||(X={}));var ge;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ge||(ge={}));var Jr;(function(t){t.websocket="websocket"})(Jr||(Jr={}));var ze;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ze||(ze={}));class ud{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodePush(e){const{join_ref:r,ref:n,event:s,topic:i,payload:o}=e,a=this.META_LENGTH+r.length+n.length+i.length+s.length,l=new ArrayBuffer(this.HEADER_LENGTH+a);let c=new DataView(l),u=0;c.setUint8(u++,this.KINDS.push),c.setUint8(u++,r.length),c.setUint8(u++,n.length),c.setUint8(u++,i.length),c.setUint8(u++,s.length),Array.from(r,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(n,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(i,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(s,f=>c.setUint8(u++,f.charCodeAt(0)));var h=new Uint8Array(l.byteLength+o.byteLength);return h.set(new Uint8Array(l),0),h.set(new Uint8Array(o),l.byteLength),h.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const{join_ref:s,ref:i,topic:o}=e,a=e.payload.event,l=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0),c=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+i.length+o.length+a.length,u=new ArrayBuffer(this.HEADER_LENGTH+c);let h=new DataView(u),f=0;h.setUint8(f++,this.KINDS.userBroadcastPush),h.setUint8(f++,s.length),h.setUint8(f++,i.length),h.setUint8(f++,o.length),h.setUint8(f++,a.length),h.setUint8(f++,this.BINARY_ENCODING),Array.from(s,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(i,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(o,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(a,g=>h.setUint8(f++,g.charCodeAt(0)));var d=new Uint8Array(u.byteLength+l.byteLength);return d.set(new Uint8Array(u),0),d.set(new Uint8Array(l),u.byteLength),d.buffer}_encodeJsonUserBroadcastPush(e){var r,n;const{join_ref:s,ref:i,topic:o}=e,a=e.payload.event,l=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},u=new TextEncoder().encode(JSON.stringify(l)).buffer,h=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+i.length+o.length+a.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let d=new DataView(f),g=0;d.setUint8(g++,this.KINDS.userBroadcastPush),d.setUint8(g++,s.length),d.setUint8(g++,i.length),d.setUint8(g++,o.length),d.setUint8(g++,a.length),d.setUint8(g++,this.JSON_ENCODING),Array.from(s,v=>d.setUint8(g++,v.charCodeAt(0))),Array.from(i,v=>d.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>d.setUint8(g++,v.charCodeAt(0))),Array.from(a,v=>d.setUint8(g++,v.charCodeAt(0)));var p=new Uint8Array(f.byteLength+u.byteLength);return p.set(new Uint8Array(f),0),p.set(new Uint8Array(u),f.byteLength),p.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(e,r,s);case this.KINDS.reply:return this._decodeReply(e,r,s);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodePush(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3);let a=this.HEADER_LENGTH+this.META_LENGTH-1;const l=n.decode(e.slice(a,a+s));a=a+s;const c=n.decode(e.slice(a,a+i));a=a+i;const u=n.decode(e.slice(a,a+o));a=a+o;const h=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{join_ref:l,ref:null,topic:c,event:u,payload:h}}_decodeReply(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const c=n.decode(e.slice(l,l+s));l=l+s;const u=n.decode(e.slice(l,l+i));l=l+i;const h=n.decode(e.slice(l,l+o));l=l+o;const f=n.decode(e.slice(l,l+a));l=l+a;const d=JSON.parse(n.decode(e.slice(l,e.byteLength))),g={status:f,response:d};return{join_ref:c,ref:u,topic:h,event:ge.reply,payload:g}}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const l=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{join_ref:null,ref:null,topic:a,event:l,payload:c}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+s));l=l+s;const u=n.decode(e.slice(l,l+i));l=l+i;const h=n.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),d=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,g={type:this.BROADCAST,event:u,payload:d};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:g}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class uo{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(q||(q={}));const vs=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=hd(o,t,e,s),i),{}):{}},hd=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s?.type,o=r[t];return i&&!n.includes(i)?ho(i,o):Yr(o)},ho=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return pd(e,r)}switch(t){case q.bool:return dd(e);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return fd(e);case q.json:case q.jsonb:return gd(e);case q.timestamp:return md(e);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return Yr(e);default:return Yr(e)}},Yr=t=>t,dd=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fd=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},gd=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},pd=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ho(e,a))}return t},md=t=>typeof t=="string"?t.replace(" ","T"):t,fo=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Or{constructor(e,r,n={},s=Gr){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _s;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_s||(_s={}));class Tt{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tt.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Tt.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Tt.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(v=>v.presence_ref),d=h.map(v=>v.presence_ref),g=u.filter(v=>d.indexOf(v.presence_ref)<0),p=h.filter(v=>f.indexOf(v.presence_ref)<0);g.length>0&&(a[c]=g),p.length>0&&(l[c]=p)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(d=>d.presence_ref),f=u.filter(d=>h.indexOf(d.presence_ref)<0);e[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ws;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ws||(ws={}));var Ot;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ot||(Ot={}));var $e;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})($e||($e={}));class kn{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=X.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Or(this,ge.join,this.params,this.timeout),this.rejoinTimer=new uo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=X.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=X.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ge.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Tt(this),this.broadcastEndpointURL=fo(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==X.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Ot.PRESENCE]&&this.bindings[Ot.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(d=>e?.($e.CHANNEL_ERROR,d)),this._onClose(()=>e?.($e.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var g;if(this.socket.setAuth(),d===void 0){e?.($e.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,v=(g=p?.length)!==null&&g!==void 0?g:0,y=[];for(let _=0;_<v;_++){const m=p[_],{filter:{event:b,schema:$,table:C,filter:N}}=m,Q=d&&d[_];if(Q&&Q.event===b&&Q.schema===$&&Q.table===C&&Q.filter===N)y.push(Object.assign(Object.assign({},m),{id:Q.id}));else{this.unsubscribe(),this.state=X.errored,e?.($e.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e($e.SUBSCRIBED);return}}).receive("error",d=>{this.state=X.errored,e?.($e.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e?.($e.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===X.joined&&e===Ot.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=X.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ge.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Or(this,ge.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=X.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Or(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>cd){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ge;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(d=>{var g,p,v;return((g=d.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(p=d.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(d=>d.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(d=>{var g,p,v,y,_,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in d){const b=d.id,$=(g=d.filter)===null||g===void 0?void 0:g.event;return b&&((p=r.ids)===null||p===void 0?void 0:p.includes(b))&&($==="*"||$?.toLocaleLowerCase()===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const b=(_=(y=d?.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return b==="*"||b===((m=r?.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===o}).map(d=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:p,table:v,commit_timestamp:y,type:_,errors:m}=g;f=Object.assign(Object.assign({},{schema:p,table:v,commit_timestamp:y,eventType:_,new:{},old:{},errors:m}),this._getPayloadRecords(g))}d.callback(f,n)})}_isClosed(){return this.state===X.closed}_isJoined(){return this.state===X.joined}_isJoining(){return this.state===X.joining}_isLeaving(){return this.state===X.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&kn.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ge.close,{},e)}_onError(e){this._on(ge.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=X.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=vs(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=vs(e.columns,e.old_record)),r}}const Cr=()=>{},Qt={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vd=[1e3,2e3,5e3,1e4],_d=1e4,wd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yd{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gr,this.transport=null,this.heartbeatIntervalMs=Qt.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cr,this.ref=0,this.reconnectTimer=null,this.vsn=ms,this.logger=Cr,this.conn=null,this.sendBuffer=[],this.serializer=new ud,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Jr.websocket}`,this.httpEndpoint=fo(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sd.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Le.connecting:return ze.Connecting;case Le.open:return ze.Open;case Le.closing:return ze.Closing;default:return ze.Closed}}isConnected(){return this.connectionState()===ze.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new kn(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ld,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Qt.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Le.open||this.conn.readyState===Le.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ge.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([wd],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:od};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ge.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new uo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qt.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,l,c,u,h,f,d;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:Gr,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:Qt.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:Cr,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:ms,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:g=>vd[g-1]||_d,this.vsn){case co:this.encode=(u=e?.encode)!==null&&u!==void 0?u:(g,p)=>p(JSON.stringify(g)),this.decode=(h=e?.decode)!==null&&h!==void 0?h:(g,p)=>p(JSON.parse(g));break;case ad:this.encode=(f=e?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(d=e?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class En extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function W(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class bd extends En{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qr extends En{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const $n=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Sd=()=>Response,Xr=t=>{if(Array.isArray(t))return t.map(r=>Xr(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Xr(n)}),e},kd=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ar=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Ed=(t,e,r)=>T(void 0,void 0,void 0,function*(){const n=yield Sd();t instanceof n&&!r?.noResolveJson?t.json().then(s=>{const i=t.status||500,o=s?.statusCode||i+"";e(new bd(Ar(s),i,o))}).catch(s=>{e(new Qr(Ar(s),s))}):e(new Qr(Ar(t),t))}),$d=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!n?s:(kd(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function zt(t,e,r,n,s,i){return T(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,$d(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ed(l,a,n))})})}function Rt(t,e,r,n){return T(this,void 0,void 0,function*(){return zt(t,"GET",e,r,n)})}function ye(t,e,r,n,s){return T(this,void 0,void 0,function*(){return zt(t,"POST",e,n,s,r)})}function en(t,e,r,n,s){return T(this,void 0,void 0,function*(){return zt(t,"PUT",e,n,s,r)})}function Td(t,e,r,n){return T(this,void 0,void 0,function*(){return zt(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Tn(t,e,r,n,s){return T(this,void 0,void 0,function*(){return zt(t,"DELETE",e,n,s,r)})}class Od{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return T(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(W(e))return{data:null,error:e};throw e}})}}var go;class Cd{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[go]="BlobDownloadBuilder",this.promise=null}asStream(){return new Od(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return T(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(W(e))return{data:null,error:e};throw e}})}}go=Symbol.toStringTag;const Ad={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ys={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pd{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=$n(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return T(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ys),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s?.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(e=="PUT"?en:ye)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(W(i))return{data:null,error:i};throw i}})}upload(e,r,n){return T(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return T(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:ys.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield en(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(W(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return T(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r?.upsert&&(s["x-upsert"]="true");const i=yield ye(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new En("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(W(n))return{data:null,error:n};throw n}})}update(e,r,n){return T(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return T(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(W(s))return{data:null,error:s};throw s}})}copy(e,r,n){return T(this,void 0,void 0,function*(){try{return{data:{path:(yield ye(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(W(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return T(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ye(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(W(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return T(this,void 0,void 0,function*(){try{const s=yield ye(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(W(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>Rt(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Cd(l,this.shouldThrowOnError)}info(e){return T(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Rt(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Xr(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(W(n))return{data:null,error:n};throw n}})}exists(e){return T(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Td(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(W(n)&&n instanceof Qr){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof r?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(r?.transform||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return T(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(W(r))return{data:null,error:r};throw r}})}list(e,r,n){return T(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ad),r),{prefix:e||""});return{data:yield ye(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(W(s))return{data:null,error:s};throw s}})}listV2(e,r){return T(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ye(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(W(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const po="2.81.1",mo={"X-Client-Info":`storage-js/${po}`};class xd{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mo),r),this.fetch=$n(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return T(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Rt(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(W(r))return{data:null,error:r};throw r}})}getBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(W(r))return{data:null,error:r};throw r}})}createBucket(e){return T(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ye(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(W(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return T(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(W(n))return{data:null,error:n};throw n}})}emptyBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(W(r))return{data:null,error:r};throw r}})}deleteBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(W(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class Rd{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mo),r),this.fetch=$n(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(W(r))return{data:null,error:r};throw r}})}listBuckets(e){return T(this,void 0,void 0,function*(){try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Rt(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(W(r))return{data:null,error:r};throw r}})}deleteBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(W(r))return{data:null,error:r};throw r}})}}const On={"X-Client-Info":`storage-js/${po}`,"Content-Type":"application/json"};class vo extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ue(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Pr extends vo{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Id extends vo{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var bs;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(bs||(bs={}));const Cn=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),jd=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ss=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ud=(t,e,r)=>T(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=o?.statusCode||o?.code||s+"";e(new Pr(Ss(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new Pr(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new Pr(a,s,o))}}else e(new Id(Ss(t),t))}),Nd=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return n?(jd(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function Dd(t,e,r,n,s,i){return T(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,Nd(e,n,s,i)).then(l=>{if(!l.ok)throw l;if(n?.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Ud(l,a,n))})})}function he(t,e,r,n,s){return T(this,void 0,void 0,function*(){return Dd(t,"POST",e,n,s,r)})}class Ld{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},On),r),this.fetch=Cn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return T(this,void 0,void 0,function*(){try{return{data:(yield he(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}getIndex(e,r){return T(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}})}listIndexes(e){return T(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return T(this,void 0,void 0,function*(){try{return{data:(yield he(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}})}}class zd{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},On),r),this.fetch=Cn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return T(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield he(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}getVectors(e){return T(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}listVectors(e){return T(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield he(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}queryVectors(e){return T(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}deleteVectors(e){return T(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield he(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}}class Bd{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},On),r),this.fetch=Cn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return T(this,void 0,void 0,function*(){try{return{data:(yield he(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}getBucket(e){return T(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}listBuckets(){return T(this,arguments,void 0,function*(e={}){try{return{data:yield he(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}deleteBucket(e){return T(this,void 0,void 0,function*(){try{return{data:(yield he(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}})}}class Md extends Bd{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new Fd(this.url,this.headers,e,this.fetch)}}class Fd extends Ld{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return T(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return T(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return T(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return T(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new qd(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class qd extends zd{constructor(e,r,n,s,i){super(e,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return T(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return T(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return T(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return T(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return T(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Zd extends xd{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new Pd(this.url,this.headers,e,this.fetch)}get vectors(){return new Md(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Rd(this.url+"/iceberg",this.headers,this.fetch)}}const Vd="2.81.1";let St="";typeof Deno<"u"?St="deno":typeof document<"u"?St="web":typeof navigator<"u"&&navigator.product==="ReactNative"?St="react-native":St="node";const Wd={"X-Client-Info":`supabase-js-${St}/${Vd}`},Kd={headers:Wd},Hd={schema:"public"},Gd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jd={},Yd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Qd=()=>Headers,Xd=(t,e,r)=>{const n=Yd(r),s=Qd();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new s(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))}};function ef(t){return t.endsWith("/")?t:t+"/"}function tf(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h?.headers)!==null&&r!==void 0?r:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function rf(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ef(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _o="2.81.1",it=30*1e3,tn=3,xr=tn*it,nf="http://localhost:9999",sf="supabase.auth.token",of={"X-Client-Info":`gotrue-js/${_o}`},rn="X-Supabase-Api-Version",wo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},af=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lf=10*60*1e3;class It extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function O(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class cf extends It{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function uf(t){return O(t)&&t.name==="AuthApiError"}class Be extends It{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class xe extends It{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class _e extends xe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hf(t){return O(t)&&t.name==="AuthSessionMissingError"}class Xe extends xe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xt extends xe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class er extends xe{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function df(t){return O(t)&&t.name==="AuthImplicitGrantRedirectError"}class ks extends xe{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nn extends xe{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Rr(t){return O(t)&&t.name==="AuthRetryableFetchError"}class Es extends xe{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sn extends xe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$s=` 	
\r=`.split(""),ff=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<$s.length;e+=1)t[$s[e].charCodeAt(0)]=-2;for(let e=0;e<ur.length;e+=1)t[ur[e].charCodeAt(0)]=e;return t})();function Ts(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(ur[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(ur[n]),e.queuedBits-=6}}function yo(t,e,r){const n=ff[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Os(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{mf(o,n,r)};for(let o=0;o<t.length;o+=1)yo(t.charCodeAt(o),s,i);return e.join("")}function gf(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function pf(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}gf(n,e)}}function mf(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ut(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)yo(t.charCodeAt(s),r,n);return new Uint8Array(e)}function vf(t){const e=[];return pf(t,r=>e.push(r)),new Uint8Array(e)}function Me(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Ts(s,r,n)),Ts(null,r,n),e.join("")}function _f(t){return Math.round(Date.now()/1e3)+t}function wf(){return Symbol("auth-callback")}const ne=()=>typeof window<"u"&&typeof document<"u",je={tested:!1,writable:!1},bo=()=>{if(!ne())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(je.tested)return je.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),je.tested=!0,je.writable=!0}catch{je.tested=!0,je.writable=!1}return je.writable};function yf(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const So=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),bf=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ot=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ue=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Oe=async(t,e)=>{await t.removeItem(e)};class yr{constructor(){this.promise=new yr.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}yr.promiseConstructor=Promise;function Ir(t){const e=t.split(".");if(e.length!==3)throw new sn("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!af.test(e[n]))throw new sn("JWT not in base64url format");return{header:JSON.parse(Os(e[0])),payload:JSON.parse(Os(e[1])),signature:ut(e[2]),raw:{header:e[0],payload:e[1]}}}async function Sf(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function kf(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Ef(t){return("0"+t.toString(16)).substr(-2)}function $f(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Ef).join("")}async function Tf(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Of(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Tf(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function et(t,e,r=!1){const n=$f();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ot(t,`${e}-code-verifier`,s);const i=await Of(n);return[i,n===i?"plain":"s256"]}const Cf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Af(t){const e=t.headers.get(rn);if(!e||!e.match(Cf))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Pf(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function xf(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Rf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tt(t){if(!Rf.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jr(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function If(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function Cs(t){return JSON.parse(JSON.stringify(t))}const Ne=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jf=[502,503,504];async function As(t){var e;if(!bf(t))throw new nn(Ne(t),0);if(jf.includes(t.status))throw new nn(Ne(t),t.status);let r;try{r=await t.json()}catch(i){throw new Be(Ne(i),i)}let n;const s=Af(t);if(s&&s.getTime()>=wo["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Es(Ne(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new _e}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Es(Ne(r),t.status,r.weak_password.reasons);throw new cf(Ne(r),t.status||500,n)}const Uf=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function P(t,e,r,n){var s;const i=Object.assign({},n?.headers);i[rn]||(i[rn]=wo["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Nf(t,e,r+a,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function Nf(t,e,r,n,s,i){const o=Uf(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new nn(Ne(l),0)}if(a.ok||await As(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await As(l)}}function we(t){var e;let r=null;zf(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=_f(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Ps(t){const e=we(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ce(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Df(t){return{data:t,error:null}}function Lf(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=vt(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function xs(t){return t}function zf(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ur=["global","local","others"];class Bf{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=So(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Ur[0]){if(Ur.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ur.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ce})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=vt(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Lf,redirectTo:r?.redirectTo})}catch(r){if(O(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ce})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:xs});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,d=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return d.length>0&&(d.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);c[`${v}Page`]=p}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(O(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){tt(e);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ce})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){tt(e);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ce})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){tt(e);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ce})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){tt(e.userId);try{const{data:r,error:n}=await P(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteFactor(e){tt(e.userId),tt(e.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await P(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:xs});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,d=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return d.length>0&&(d.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);c[`${v}Page`]=p}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(O(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await P(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await P(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await P(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}}function Rs(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const rt={debug:!!(globalThis&&bo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ko extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Mf extends ko{}async function Ff(t,e,r){rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),rt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Mf(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(rt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function qf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Eo(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Zf(t){return parseInt(t,16)}function Vf(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Wf(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const d=Eo(t.address),g=u?`${u}://${n}`:n,p=t.statement?`${t.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${d}

${p}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let _=`
Resources:`;for(const m of c){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);_+=`
- ${m}`}y+=_}return`${v}
${y}`}class G extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class hr extends G{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Kf({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new G({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new G({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new G({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new G({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new G({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new G({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new G({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new G({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if($o(o)){if(i.rp.id!==o)return new G({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new G({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new G({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new G({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new G({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Hf({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new G({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new G({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if($o(n)){if(r.rpId!==n)return new G({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new G({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new G({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new G({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Gf{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Jf=new Gf;function Yf(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=vt(t,["challenge","user","excludeCredentials"]),i=ut(e).buffer,o=Object.assign(Object.assign({},r),{id:ut(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ut(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Qf(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=vt(t,["challenge","allowCredentials"]),s=ut(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ut(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Xf(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Me(new Uint8Array(t.response.attestationObject)),clientDataJSON:Me(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function eg(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Me(new Uint8Array(s.authenticatorData)),clientDataJSON:Me(new Uint8Array(s.clientDataJSON)),signature:Me(new Uint8Array(s.signature)),userHandle:s.userHandle?Me(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $o(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Is(){var t,e;return!!(ne()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function tg(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new hr("Browser returned unexpected credential type",e)}:{data:null,error:new hr("Empty credential response",e)}}catch(e){return{data:null,error:Kf({error:e,options:t})}}}async function rg(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new hr("Browser returned unexpected credential type",e)}:{data:null,error:new hr("Empty credential response",e)}}catch(e){return{data:null,error:Hf({error:e,options:t})}}}const ng={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},sg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function dr(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=dr(a,o):n[i]=dr(o)}else n[i]=o}return n}function ig(t,e){return dr(ng,t,e||{})}function og(t,e){return dr(sg,t,e||{})}class ag{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:a};const l=s??Jf.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=ig(o.webauthn.credential_options.publicKey,i?.create),{data:u,error:h}=await tg({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=og(o.webauthn.credential_options.publicKey,i?.request),{data:u,error:h}=await rg(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Be("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new It("rpId is required for WebAuthn authentication")};try{if(!Is())return{data:null,error:new Be("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Be("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new It("rpId is required for WebAuthn registration")};try{if(!Is())return{data:null,error:new Be("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Be("Unexpected error in register",o)}}}}qf();const lg={url:nf,storageKey:sf,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:of,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function js(t,e,r){return await r()}const nt={};class jt{get jwks(){var e,r;return(r=(e=nt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){nt[this.storageKey]=Object.assign(Object.assign({},nt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=nt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){nt[this.storageKey]=Object.assign(Object.assign({},nt[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},lg),e);if(this.storageKey=i.storageKey,this.instanceID=(r=jt.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,jt.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ne()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Bf({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=So(i.fetch),this.lock=i.lock||js,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:ne()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Ff:this.lock=js,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ag(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:bo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rs(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Rs(this.memoryStorage)),ne()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_o}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(ne()&&(r=yf(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ne()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),df(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return O(r)?this._returnResult({error:r}):this._returnResult({error:new Be("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:we}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let d=null,g=null;this.flowType==="pkce"&&([d,g]=await et(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:d,code_challenge_method:g},xform:we})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f?.data)!==null&&n!==void 0?n:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:we})}else throw new Xt("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Ps})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Ps})}else throw new Xt("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Xe;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,o,a,l,c,u,h,f;let d,g;if("message"in e)d=e.message,g=e.signature;else{const{chain:p,wallet:v,statement:y,options:_}=e;let m;if(ne())if(typeof v=="object")m=v;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")m=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=v}const b=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href),$=await m.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=Eo($[0]);let N=(n=_?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const H=await m.request({method:"eth_chainId"});N=Zf(H)}const Q={domain:b.host,address:C,statement:y,uri:b.href,version:"1",chainId:N,nonce:(s=_?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=_?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=_?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=_?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=_?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=_?.signInWithEthereum)===null||u===void 0?void 0:u.resources};d=Wf(Q),g=await m.request({method:"personal_sign",params:[Vf(d),C]})}try{const{data:p,error:v}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:we});if(v)throw v;if(!p||!p.session||!p.user){const y=new Xe;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(O(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var r,n,s,i,o,a,l,c,u,h,f,d;let g,p;if("message"in e)g=e.message,p=e.signature;else{const{chain:v,wallet:y,statement:_,options:m}=e;let b;if(ne())if(typeof y=="object")b=y;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))b=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!m?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const $=new URL((r=m?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const C=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m?.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),_?{statement:_}:null));let N;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")N=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)N=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),p=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${$.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(s=(n=m?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((a=m?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((c=m?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(u=m?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const C=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=C}}try{const{data:v,error:y}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Me(p)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:we});if(y)throw y;if(!v||!v.session||!v.user){const _=new Xe;return this._returnResult({data:{user:null,session:null},error:_})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(O(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const r=await Ue(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:we});if(await Oe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Xe;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:we}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Xe;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await et(this.storage,this.storageKey));const{error:h}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new Xt("You must provide either an email or phone number.")}catch(a){if(O(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:we});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await et(this.storage,this.storageKey));const c=await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Df});return!((i=c.data)===null||i===void 0)&&i.url&&ne()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(O(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new _e;const{error:s}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(O(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await P(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await P(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:a})}throw new Xt("You must provide either an email or phone number and a type")}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ue(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<xr:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Ue(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=jr()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=If(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ce}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _e}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ce})})}catch(r){if(O(r))return hf(r)&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new _e;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await et(this.storage,this.storageKey));const{data:c,error:u}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ce});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(O(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _e;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Ir(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(O(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new _e;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!ne())throw new er("No browser detected.");if(e.error||e.error_description||e.error_code)throw new er(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ks("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new er("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ks("No code detected.");const{data:_,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new er("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const d=f-u;d*1e3<=it&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${h}s`);const g=f-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:p,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(n){if(O(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ue(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(uf(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=wf(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await et(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(O(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",d,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ne()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(O(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,h=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:we}),{data:f,error:d}=h;return d?this._returnResult({data:{user:null,session:null},error:d}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Xe}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:d}))}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await kf(async s=>(s>0&&await Sf(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:we})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Rr(i)&&Date.now()+o-n<it})}catch(n){if(this._debug(r,"error",n),O(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ne()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ue(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ue(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ot(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o?.user)!==null&&e!==void 0?e:jr()}else if(s&&!s.user&&!s.user){const o=await Ue(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await Oe(this.storage,this.storageKey+"-user"),await ot(this.storage,this.storageKey,s)):s.user=jr()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xr;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${xr}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Rr(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new _e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new _e;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),O(i)){const o={data:null,error:i};return Rr(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ot(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Cs(s);await ot(this.storage,this.storageKey,i)}else{const s=Cs(r);await ot(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Oe(this.storage,this.storageKey),await Oe(this.storage,this.storageKey+"-code-verifier"),await Oe(this.storage,this.storageKey+"-user"),this.userStorage&&await Oe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ne()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),it);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/it);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${it}ms, refresh threshold is ${tn} ticks`),s<=tn&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ko)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ne()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await et(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await P(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await P(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l?.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Xf(e.webauthn.credential_response):eg(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Yf(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Qf(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r?.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ir(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await P(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new _e})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new _e});const o=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ne()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new _e});const o=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ne()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+lf>s)return n;const{data:i,error:o}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:d,error:g}=await this.getSession();if(g||!d.session)return this._returnResult({data:null,error:g});n=d.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Ir(n);r?.allowExpired||Pf(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!c){const{error:d}=await this.getUser(n);if(d)throw d;return{data:{claims:i,header:s,signature:o},error:null}}const u=xf(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,vf(`${a}.${l}`)))throw new sn("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}}jt.nextInstanceID={};const cg=jt;class ug extends cg{constructor(e){super(e)}}class hg{constructor(e,r,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=r;const a=rf(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Hd,realtime:Jd,auth:Object.assign(Object.assign({},Gd),{storageKey:l}),global:Kd},u=tf(n??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Xd(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new nd(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Zd(this.storageUrl.href,this.headers,this.fetch,n?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Yh(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:u},h,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ug({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),h),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new yd(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dg=(t,e,r)=>new hg(t,e,r);function fg(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}fg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function gg(t){return dg(t.url,t.anonKey)}async function To(t){const{data:e}=await t.schema("tvtrash").from("municipalities").select();return e}async function pg(t,e,r=100,n=0){const{data:s}=await t.schema("tvtrash").from("waste_collections").select().eq("municipality_id",e).gte("date",new Date().toLocaleDateString("en-CA")).range(n,n+r-1).order("date",{ascending:!0});return s}const Oo=Se(),mg=t=>{const e=xi(),r=gg(e.supabase);return w(Oo.Provider,{value:{client:r},get children(){return t.children}})},An=()=>{const t=ve(Oo);if(!t)throw new Error("useSupabase must be used within a SupabaseProvider");return t.client},Co=Se(),vg=t=>{const e=xi(),r=An(),[n,s]=L(null),[i,o]=L(!0),a=pn(),l="/";Ws(async()=>{try{const{data:{session:g}}=await r.auth.getSession();s(g?.user??null)}catch(g){console.error("Error getting session:",g)}finally{o(!1)}const{data:{subscription:d}}=r.auth.onAuthStateChange(async(g,p)=>{s(p?.user??null),o(!1)});We(()=>{d.unsubscribe()})});const f={user:n,loading:i,signInWithMagicLink:async d=>{o(!0);try{const{data:g,error:p}=await r.auth.signInWithOtp({email:d,options:{shouldCreateUser:!0,emailRedirectTo:e.login.rediectUrl}});if(p)throw p;if(g.user&&!g.session)throw new Error("Please check your email to log in!")}finally{o(!1)}},signOut:async()=>{o(!0);try{const{error:d}=await r.auth.signOut();if(d)throw d}finally{o(!1),a(l)}},getSession:async()=>{const{data:d,error:g}=await r.auth.getSession();if(g)throw g;return d.session}};return w(Co.Provider,{value:f,get children(){return t.children}})},wt=()=>{const t=ve(Co);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Ao=t=>t!=null&&(t=Object.getPrototypeOf(t),t===Array.prototype||t===Object.prototype);function Po(t,e,r){for(const[n,s]of Object.entries(e)){const i=`${r}.${n}`;t[i]=s,Ao(s)&&Po(t,s,i)}}function _g(t){const e={...t};for(const[r,n]of Object.entries(t))Ao(n)&&Po(e,n,r);return e}const wg=(t,e)=>{if(e)for(const[r,n]of Object.entries(e))t=t.replace(new RegExp(`{{\\s*${r}\\s*}}`,"g"),n);return t},yg=t=>t;function bg(t,e=yg){return(r,...n)=>{r[0]==="."&&(r=r.slice(1));const s=t()?.[r];switch(typeof s){case"function":return s(...n);case"string":return e(s,n[0]);default:return s}}}const Sg={hello:"Ciao",notFound:"404 | Pagina non trovata",auth:{welcomeBack:"Benvenuto",signIn:"Accedi",signInDescription:"Inserisci la tua email, riceverai un link per accedere al tuo account.",email:"Email",emailPlaceholder:"Inserisci la tua email",signInSuccess:"Controlla la tua casella di posta per completare il processo di accesso.",signInError:"Si  verificato un errore durante l'accesso.",sendingEmail:"Invio email...",accessDenied:"Accesso Negato",loginRequired:"Devi effettuare l'accesso per visualizzare questa pagina.",logout:"Esci",user:"Utente"},landing:{hero:{title:"Non dimenticare mai pi di buttare la spazzatura!",description:"Ricevi quotidianamente un reminder su Telegram con i dettagli dei bidoni da portare in strada per la raccolta rifiuti del giorno successivo, nel tuo comune, in provincia di Treviso. Semplice, puntuale e gratuito. Nessuna installazione necessaria!",ctaCalendar:"Vai al Calendario",ctaAuth:"Accedi per configurare le notifiche"},mockup:{notification:{title:"TVTrash	",body:" Promemoria: Domani raccolta Plastica e Carta.",time:"20:00"}}},account:{profile:"Profilo",notificationSettings:"Impostazioni Notifiche",errors:{enterChatId:"Inserisci il tuo ID Chat Telegram",notificationTypeNotFound:"Tipo di notifica Telegram non trovato",selectMunicipality:"Seleziona un comune",invalidChatId:"Formato ID Chat non valido. Deve essere un numero.",saveProfileError:"Si  verificato un errore durante il salvataggio del profilo",saveChatIdFirst:"Salva prima il tuo ID Chat",sendTestError:"Impossibile inviare la notifica di test",deleteError:"Impossibile eliminare la preferenza di notifica."},success:{profileUpdated:"Profilo aggiornato con successo! Inizierai a ricevere notifiche presto.",testSent:"Notifica di test inviata! Controlla il tuo Telegram.",deleted:"Preferenza di notifica eliminata. Non riceverai pi notifiche."},modal:{deleteTitle:"Eliminare preferenza di notifica?",deleteMessage:"Sei sicuro di voler eliminare la tua preferenza di notifica? Non riceverai pi notifiche.",cancel:"Annulla",delete:"Elimina"},currentSettings:{title:"Impostazioni Attuali",status:"Stato:",configured:"Configurato",notConfigured:"Non Configurato",municipality:"Comune:",notSet:"Non impostato",chatId:"ID Chat:",deletePreference:"Elimina Preferenza Notifica"},instructions:{title:"Come ottenere il tuo ID Chat",step1Title:"Apri Telegram",step1Desc:"Avvia l'app Telegram sul tuo dispositivo",step2Title:"Cerca @userinfobot",step2Desc:"Cerca e avvia una chat con @userinfobot",step3Title:"Invia /start",step3Desc:"Digita /start e invia il messaggio",step4Title:"Copia il tuo ID",step4Desc:"Il bot risponder con il tuo ID Chat. Copia il numero.",alternativeTitle:"Metodo Alternativo",alternativeDesc:"Puoi anche inviare un messaggio a @chatidbot e risponder con il tuo ID Chat.",privateTitle:"Tienilo Privato",privateDesc:"Non condividere mai il tuo ID Chat con fonti non attendibili."},form:{title:"Notifiche Telegram",municipalityLabel:"Comune di Interesse",selectPlaceholder:"Seleziona il tuo comune",loading:"Caricamento...",municipalityHelp:"Riceverai notifiche per gli eventi in questo comune",chatIdLabel:"ID Chat Telegram",chatIdPlaceholder:"Inserisci il tuo ID Chat (es. 123456789)",help:"Aiuto",chatIdHelp:'Non conosci il tuo ID Chat? Clicca "Aiuto" per le istruzioni',sendTest:"Invia Messaggio di Test",saving:"Salvataggio...",saveSettings:"Salva Impostazioni"}},calendar:{title:"Calendario",description:"Controlla il calendario della raccolta rifiuti per il tuo comune nella provincia di Treviso",table:{date:"Data",waste:"Rifiuti"},banner:{title:"Rimani aggiornato con le notifiche Telegram!",description:"Configura il tuo profilo per ricevere i promemoria giornalieri direttamente su Telegram.",configure:"Configura",cardTitle:"Notifiche Telegram",cardDescription:"Ricevi aggiornamenti del calendario direttamente su Telegram",benefits:"Vantaggi:",benefit1:"Notifiche istantanee per nuovi eventi",benefit2:"Promemoria prima delle date importanti",benefit3:"Aggiornamenti specifici per il comune",benefit4:"Riepiloghi settimanali del calendario",setup:"Imposta Notifiche",learnMore:"Scopri di pi"}},footer:{madeBy:"Sviluppato con  da"},navbar:{calendar:"Calendario",signIn:"Accedi"},theme:{toggle:"Cambia tema colore",switchToDark:"Passa alla modalit scura",switchToLight:"Passa alla modalit chiara"},language:{toggle:"Toggle language",switchToIt:"Switch to Italian",switchToEn:"Switch to English"}},kg={hello:"Hello",notFound:"404 | Page not found",auth:{welcomeBack:"Welcome back",signIn:"Sign In",signInDescription:"Insert your email, you'll receive a link to login to your account.",email:"Email",emailPlaceholder:"Enter your email",signInSuccess:"Please check the login link in your email inbox in order to complete the sign-in process.",signInError:"An error occurred during sign-in.",sendingEmail:"Sending email...",accessDenied:"Access Denied",loginRequired:"You need to be logged in to access this page.",logout:"Logout",user:"User"},landing:{hero:{title:"Never forget to take out the trash again!",description:"Receive a notification on Telegram everyday with details about the next day's waste collection, for your municipality in Treviso province. Simple, punctual, and free. No installation required!",ctaCalendar:"Go to Calendar",ctaAuth:"Sign In for Notifications"},mockup:{notification:{title:"TVTrash",body:" Reminder: Tomorrow Plastic and Paper collection.",time:"8:00 PM"}}},account:{profile:"Profile",notificationSettings:"Notification Settings",errors:{enterChatId:"Please enter your Telegram Chat ID",notificationTypeNotFound:"Telegram notification type not found",selectMunicipality:"Please select a municipality",invalidChatId:"Invalid Chat ID format. It should be a number.",saveProfileError:"An error occurred while saving your profile",saveChatIdFirst:"Please save your Chat ID first",sendTestError:"Failed to send test notification",deleteError:"Failed to delete notification preference."},success:{profileUpdated:"Profile updated successfully! You will start receiving notifications soon.",testSent:"Test notification sent! Check your Telegram.",deleted:"Notification preference deleted. You will no longer receive notifications."},modal:{deleteTitle:"Delete Notification Preference?",deleteMessage:"Are you sure you want to delete your notification preference? You will no longer receive notifications.",cancel:"Cancel",delete:"Delete"},currentSettings:{title:"Current Settings",status:"Status:",configured:"Configured",notConfigured:"Not Configured",municipality:"Municipality:",notSet:"Not set",chatId:"Chat ID:",deletePreference:"Delete Notification Preference"},instructions:{title:"How to Get Your Chat ID",step1Title:"Open Telegram",step1Desc:"Launch the Telegram app on your device",step2Title:"Find @userinfobot",step2Desc:"Search for and start a chat with @userinfobot",step3Title:"Send /start",step3Desc:"Type /start and send the message",step4Title:"Copy Your ID",step4Desc:"The bot will reply with your Chat ID. Copy the number.",alternativeTitle:"Alternative Method",alternativeDesc:"You can also message @chatidbot and it will reply with your Chat ID.",privateTitle:"Keep it Private",privateDesc:"Never share your Chat ID with untrusted sources."},form:{title:"Telegram Notifications",municipalityLabel:"Municipality of Interest",selectPlaceholder:"Select your municipality",loading:"Loading...",municipalityHelp:"You'll receive notifications for events in this municipality",chatIdLabel:"Telegram Chat ID",chatIdPlaceholder:"Enter your Chat ID (e.g., 123456789)",help:"Help",chatIdHelp:`Don't know your Chat ID? Click "Help" for instructions`,sendTest:"Send Test Message",saving:"Saving...",saveSettings:"Save Settings"}},calendar:{title:"Calendar",description:"Check the waste collection calendar for your municipality in the province of Treviso",table:{date:"Date",waste:"Waste"},banner:{title:"Stay Updated with Telegram Notifications!",description:"Configure your profile to receive calendar updates and reminders directly on Telegram.",configure:"Configure",cardTitle:"Telegram Notifications",cardDescription:"Get calendar updates directly in Telegram",benefits:"Benefits:",benefit1:"Instant notifications for new events",benefit2:"Reminders before important dates",benefit3:"Municipality-specific updates",benefit4:"Weekly calendar summaries",setup:"Set Up Notifications",learnMore:"Learn More"}},footer:{madeBy:"Made with  by"},navbar:{calendar:"Calendar",signIn:"Sign in"},theme:{toggle:"Toggle color theme",switchToDark:"Switch to dark mode",switchToLight:"Switch to light mode"},language:{toggle:"Toggle language",switchToIt:"Switch to Italian",switchToEn:"Switch to English"}},Eg={en:kg,it:Sg},xo=Se();function $g(t){const[e,r]=L("it"),n=I(()=>_g(Eg[e()])),s=bg(n,wg);return w(xo.Provider,{value:{t:s,locale:e,setLocale:r},get children(){return t.children}})}function se(){const t=ve(xo);if(!t)throw new Error("useI18n must be used within an I18nProvider");return t}var Tg=j('<div class="min-h-screen bg-base-200 flex items-center justify-center"><div class="loading loading-spinner loading-lg">'),Og=j('<div class="min-h-screen bg-base-200 flex items-center justify-center"><div class="card w-96 bg-base-100 shadow-xl"><div class="card-body text-center"><h2 class="card-title justify-center"></h2><p></p><div class="card-actions justify-center"><a href=/login class="btn btn-primary">');function Cg(t){const e=wt(),{t:r}=se();return w(de,{get when(){return!e.loading()},get fallback(){return Tg()},get children(){return w(de,{get when(){return e.user()},get fallback(){return(()=>{var n=Og(),s=n.firstChild,i=s.firstChild,o=i.firstChild,a=o.nextSibling,l=a.nextSibling,c=l.firstChild;return S(o,()=>r("auth.accessDenied")),S(a,()=>r("auth.loginRequired")),S(c,()=>r("auth.signIn")),n})()},get children(){return t.children}})}})}const Ro=Se(),Ag=["title","meta"],Us=[],Ns=["name","http-equiv","content","charset","media"].concat(["property"]),Ds=(t,e)=>{const r=Object.fromEntries(Object.entries(t.props).filter(([n])=>e.includes(n)).sort());return(Object.hasOwn(r,"name")||Object.hasOwn(r,"property"))&&(r.name=r.name||r.property,delete r.property),t.tag+JSON.stringify(r)};function Pg(){if(!A.context){const r=document.head.querySelectorAll("[data-sm]");Array.prototype.forEach.call(r,n=>n.parentNode.removeChild(n))}const t=new Map;function e(r){if(r.ref)return r.ref;let n=document.querySelector(`[data-sm="${r.id}"]`);return n?(n.tagName.toLowerCase()!==r.tag&&(n.parentNode&&n.parentNode.removeChild(n),n=document.createElement(r.tag)),n.removeAttribute("data-sm")):n=document.createElement(r.tag),n}return{addTag(r){if(Ag.indexOf(r.tag)!==-1){const i=r.tag==="title"?Us:Ns,o=Ds(r,i);t.has(o)||t.set(o,[]);let a=t.get(o),l=a.length;a=[...a,r],t.set(o,a);let c=e(r);r.ref=c,dt(c,r.props);let u=null;for(var n=l-1;n>=0;n--)if(a[n]!=null){u=a[n];break}return c.parentNode!=document.head&&document.head.appendChild(c),u&&u.ref&&u.ref.parentNode&&document.head.removeChild(u.ref),l}let s=e(r);return r.ref=s,dt(s,r.props),s.parentNode!=document.head&&document.head.appendChild(s),-1},removeTag(r,n){const s=r.tag==="title"?Us:Ns,i=Ds(r,s);if(r.ref){const o=t.get(i);if(o){if(r.ref.parentNode){r.ref.parentNode.removeChild(r.ref);for(let a=n-1;a>=0;a--)o[a]!=null&&document.head.appendChild(o[a].ref)}o[n]=null,t.set(i,o)}else r.ref.parentNode&&r.ref.parentNode.removeChild(r.ref)}}}}const xg=t=>{const e=Pg();return w(Ro.Provider,{value:e,get children(){return t.children}})},Pn=(t,e,r)=>(Rg({tag:t,props:e,setting:r,id:Xo(),get name(){return e.name||e.property}}),null);function Rg(t){const e=ve(Ro);if(!e)throw new Error("<MetaProvider /> should be in the tree");J(()=>{const r=e.addTag(t);We(()=>e.removeTag(t,r))})}const Ig=t=>Pn("title",t,{escape:!0,close:!0}),ee=t=>Pn("meta",t),tr=t=>Pn("link",t);function Io(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Io(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function jg(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Io(t))&&(n&&(n+=" "),n+=e);return n}const Ls=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,zs=jg,br=(t,e)=>r=>{var n;if(e?.variants==null)return zs(t,r?.class,r?.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=r?.[c],h=i?.[c];if(u===null)return null;const f=Ls(u)||Ls(h);return s[c][f]}),a=r&&Object.entries(r).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:f,...d}=u;return Object.entries(d).every(g=>{let[p,v]=g;return Array.isArray(v)?v.includes({...i,...a}[p]):{...i,...a}[p]===v})?[...c,h,f]:c},[]);return zs(t,o,l,r?.class,r?.className)};var Ug=j("<button type=button>");const Ng=br("btn",{variants:{intent:{primary:"btn-primary",secondary:"btn-secondary",danger:"btn-error"},size:{sm:"btn-sm",md:"btn-md",lg:"btn-lg"},shape:{circle:"btn-circle",square:"btn-square"},outline:{true:"btn-outline"},shadow:{lg:"shadow-lg hover:shadow-xl"},width:{full:"w-full"}},defaultVariants:{}}),Pe=t=>{const{intent:e,size:r,shape:n,shadow:s,width:i,outline:o}=t;return(()=>{var a=Ug();return dt(a,me({get class(){return Ng({intent:e,size:r,shape:n,shadow:s,width:i,outline:o})}},t),!1,!0),S(a,()=>t.children),a})()};var Dg=j('<footer class="footer sm:footer-horizontal bg-base-100 text-base-content items-center py-4 px-8"><aside class="grid-flow-col items-center justify-self-center md:justify-self-start"><img src=/favicon.png alt="TVTrash logo"class=size-8><p>trevisorifiuti</p></aside><aside class="grid-flow-col justify-self-center md:justify-self-end"> <a href=https://mattiadevivo.dev>Mattia De Vivo');const Lg=()=>{const{t}=se();return(()=>{var e=Dg(),r=e.firstChild,n=r.nextSibling,s=n.firstChild;return S(n,()=>t("footer.madeBy"),s),e})()};var zg=j('<div class="dropdown dropdown-end"><button tabindex=0 type=button class="flex flex-row items-center gap-2 btn btn-ghost p-0"><span class="avatar bg-accent items-center justify-center overflow-hidden text-xs rounded-md hover:border-transparent h-8 w-8"data-state=closed><span class="items-center justify-center"></span></span><div class="hidden md:flex"><p class="min-w-0 max-w-48 truncate"></p></div></button><ul tabindex=0 class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52"><li></li><li><button type=button>');function Bg(){const t=wt(),{t:e}=se(),r=async()=>{try{await t.signOut()}catch(n){console.error("Error signing out:",n)}};return w(de,{get when(){return t.user()},get children(){var n=zg(),s=n.firstChild,i=s.firstChild,o=i.firstChild,a=i.nextSibling,l=a.firstChild,c=s.nextSibling,u=c.firstChild,h=u.nextSibling,f=h.firstChild;return S(o,()=>t.user()?.email?.charAt(0).toUpperCase()),S(l,()=>t.user()?.email||e("auth.user")),S(u,w(ct,{href:"/account/notifications",get children(){return e("account.notificationSettings")}})),f.$$click=r,S(f,()=>e("auth.logout")),n}})}pt(["click"]);var Mg=j('<img src=/favicon.png alt="TVTrash logo"class="size-8 animate-spin [animation-duration:7s]">'),Fg=j('<div class="navbar justify-between bg-base-100 text-base-content shadow-sm"><div class=flex-1></div><div class="flex items-center h-14 gap-2">');const qg=t=>{const e=wt(),{t:r}=se();return(()=>{var n=Fg(),s=n.firstChild,i=s.nextSibling;return S(s,w(ct,{class:"btn btn-ghost text-xl",href:"/",get children(){return[Mg(),"trevisorifiuti"]}})),S(i,w(ct,{href:"/calendar",class:"btn btn-primary btn-sm",get children(){return r("navbar.calendar")}}),null),S(i,w(de,{get when(){return e.user()},get fallback(){return w(ct,{href:"/login",class:"btn btn-accent btn-sm",get children(){return r("navbar.signIn")}})},get children(){return w(Bg,{})}}),null),n})()};/**
* @license lucide-solid v0.535.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var Zg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},st=Zg,Vg=j("<svg>"),Bs=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wg=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),Kg=t=>{const e=Wg(t);return e.charAt(0).toUpperCase()+e.slice(1)},Hg=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),Gg=t=>{const[e,r]=dn(t,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var n=Vg();return dt(n,me(st,{get width(){return e.size??st.width},get height(){return e.size??st.height},get stroke(){return e.color??st.stroke},get"stroke-width"(){return I(()=>!!e.absoluteStrokeWidth)()?Number(e.strokeWidth??st["stroke-width"])*24/Number(e.size):Number(e.strokeWidth??st["stroke-width"])},get class(){return Hg("lucide","lucide-icon",...e.name!=null?[`lucide-${Bs(Kg(e.name))}`,`lucide-${Bs(e.name)}`]:[],e.class!=null?e.class:"")}},r),!0,!0),S(n,w(gr,{get each(){return e.iconNode},children:([s,i])=>w(Ca,me({component:s},i))})),n})()},Bt=Gg,Jg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yg=t=>w(Bt,me(t,{iconNode:Jg,name:"circle-question-mark"})),Qg=Yg,Xg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ep=t=>w(Bt,me(t,{iconNode:Xg,name:"info"})),Ms=ep,tp=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rp=t=>w(Bt,me(t,{iconNode:tp,name:"send"})),np=rp,sp=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ip=t=>w(Bt,me(t,{iconNode:sp,name:"settings"})),op=ip,ap=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lp=t=>w(Bt,me(t,{iconNode:ap,name:"triangle-alert"})),cp=lp,up=j('<div class=fab><div tabindex=0 role=button class="btn btn-lg btn-circle btn-primary">');const hp=t=>(()=>{var e=up(),r=e.firstChild;return S(r,()=>t.buttonContent),S(e,()=>t.children,null),e})(),dp=t=>{const r=me({title:"TVTrash | Rimani aggiornato sul calendario  della raccolta rifiuti Contarina del tuo comune in provincia di Treviso",description:"Consulta il calendario rifiuti Contarina del tuo comune in provincia di Treviso. Attiva le notifiche Telegram per sapere sempre quale bidone esporre il giorno dopo.",image:"/og-image.png",url:"https://trevisorifiuti.top",type:"website",keywords:{primary:["treviso ecocalendario","contarina ecocalendario","contarina calendario"],secondary:["treviso ecocalendario contarina","treviso ecocalendario rifiuti","contarina ecocalendario raccolta","contarina ecocalendario notifiche","contarina calendario rifiuti","contarina calendario raccolta","contarina calendario notifiche"],longTail:["ecocalendario contarina provincia treviso","calendario raccolta rifiuti contarina","contarina calendario notifiche"],location:["calendario raccolta rifiuti treviso","calendario raccolta rifiuti contarina provincia treviso"]}},t);return[w(Ig,{get children(){return r.title}}),w(ee,{name:"description",get content(){return r.description}}),w(ee,{name:"author",content:"Mattia De Vivo"}),w(ee,{name:"keywords",get content(){return Object.values(r.keywords).flat().join(", ")}}),w(ee,{name:"robots",content:"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),w(ee,{property:"og:type",get content(){return r.type}}),w(ee,{property:"og:title",get content(){return r.title}}),w(ee,{property:"og:description",get content(){return r.description}}),w(ee,{property:"og:image",get content(){return r.image}}),w(ee,{property:"og:image:width",content:"1200"}),w(ee,{property:"og:image:height",content:"630"}),w(ee,{property:"og:image:alt",content:"TvTrash garbage bin"}),w(ee,{property:"og:url",get content(){return r.url}}),w(ee,{property:"og:site_name",content:"TVTrash"}),w(ee,{name:"twitter:card",content:"summary_large_image"}),w(ee,{name:"twitter:title",get content(){return r.title}}),w(ee,{name:"twitter:description",get content(){return r.description}}),w(ee,{name:"twitter:image",get content(){return r.image}}),w(ee,{name:"twitter:image:alt",content:"TvTrash garbage bin"}),w(tr,{rel:"canonical",get href(){return r.url}}),w(tr,{rel:"alternate",hreflang:"en",get href(){return r.url}}),w(tr,{rel:"alternate",hreflang:"it",get href(){return r.url}}),w(tr,{rel:"alternate",hreflang:"x-default",get href(){return r.url}})]},fp=()=>{const{locale:t,setLocale:e,t:r}=se();return w(Pe,{get"aria-label"(){return r("language.toggle")},size:"lg",onClick:()=>{e(t()==="it"?"en":"it")},shape:"circle",shadow:"lg",get children(){return t()==="it"?"":""}})},jo=Se(),gp=t=>{const[e,r]=L("light");Ws(()=>{const i=localStorage.getItem("theme");if(i&&(i==="light"||i==="dark"))r(i),document.documentElement.setAttribute("data-theme",i);else{const a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";r(a),document.documentElement.setAttribute("data-theme",a)}});const s={theme:e,setTheme:i=>{r(i),document.documentElement.setAttribute("data-theme",i),localStorage.setItem("theme",i)}};return w(jo.Provider,{value:s,get children(){return t.children}})},pp=()=>{const t=ve(jo);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t};var mp=j('<svg aria-hidden=true xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"class=size-5><title></title><g stroke-linejoin=round stroke-linecap=round stroke-width=2 fill=none stroke=currentColor><circle cx=12 cy=12 r=4></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41">'),vp=j('<svg aria-hidden=true xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"class=size-5><title></title><g stroke-linejoin=round stroke-linecap=round stroke-width=2 fill=none stroke=currentColor><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z">');const _p=()=>{const{theme:t,setTheme:e}=pp(),{t:r}=se();return w(Pe,{get"aria-label"(){return r("theme.toggle")},size:"lg",onClick:()=>{e(t()==="dark"?"light":"dark")},shape:"circle",shadow:"lg",get children(){return w(de,{get when(){return t()==="dark"},get fallback(){return(()=>{var s=vp(),i=s.firstChild;return S(i,()=>r("theme.switchToDark")),s})()},get children(){var s=mp(),i=s.firstChild;return S(i,()=>r("theme.switchToLight")),s}})}})};var wp=j('<main class="px-2 py-5 bg-base-200 md:px-40">'),yp=j("<div><p>Something went wrong: ");const bp=t=>w(gp,{get children(){return w($g,{get children(){return w(Zh,{get children(){return w(mg,{get children(){return w(vg,{get children(){return w(xg,{get children(){return[w(dp,{}),w(qg,{}),w(ra,{fallback:(e,r)=>(()=>{var n=yp(),s=n.firstChild;return s.firstChild,S(s,()=>e.message,null),S(n,w(Pe,{type:"button",onClick:r,children:"Try again"}),null),n})(),get children(){var e=wp();return S(e,()=>t.children),e}}),w(Lg,{}),w(hp,{get buttonContent(){return w(op,{})},get children(){return[w(fp,{}),w(_p,{})]}})]}})}})}})}})}})}});var Sp=j('<div class="flex items-center justify-center h-lvh"><span>');const kp=br("loading loading-spinner grow max-w-8 max-h-8",{variants:{variant:{primary:"text-primary",secondary:"text-secondary",accent:"text-accent",neutral:"text-neutral",info:"text-info",success:"text-success",warning:"text-warning",error:"text-error"}},defaultVariants:{variant:"primary"}}),on=t=>(()=>{var e=Sp(),r=e.firstChild;return J(()=>Dt(r,kp({variant:t.variant}))),e})();var Ep=j('<div class="card bg-base-100 shadow-xl mt-6 transition-all duration-300"><div class=card-body><h3 class="card-title text-lg"></h3><div class="space-y-2 text-sm"><div class="flex justify-between"><span class=text-gray-600></span><div class="badge badge-outline"></div></div><div class="flex justify-between"><span class=text-gray-600></span><span class=font-medium></span></div><div class="flex justify-between"><span class=text-gray-600></span><span class="font-mono text-xs">');const $p=t=>{const{t:e}=se();return(()=>{var r=Ep(),n=r.firstChild,s=n.firstChild,i=s.nextSibling,o=i.firstChild,a=o.firstChild,l=a.nextSibling,c=o.nextSibling,u=c.firstChild,h=u.nextSibling,f=c.nextSibling,d=f.firstChild,g=d.nextSibling;return S(s,()=>e("account.currentSettings.title")),S(a,()=>e("account.currentSettings.status")),S(l,(()=>{var p=I(()=>!!t.isConfigured);return()=>p()?e("account.currentSettings.configured"):e("account.currentSettings.notConfigured")})()),S(u,()=>e("account.currentSettings.municipality")),S(h,(()=>{var p=I(()=>!!(t.isConfigured&&t.notificationPreference?.municipality_id&&t.municipalities));return()=>p()?t.municipalities.find(v=>v.id===t.notificationPreference?.municipality_id)?.name:e("account.currentSettings.notSet")})()),S(d,()=>e("account.currentSettings.chatId")),S(g,(()=>{var p=I(()=>!!(t.isConfigured&&t.notificationPreference?.notification_info));return()=>p()?"***"+(t.notificationPreference.notification_info.chat_id??"").slice(-4):e("account.currentSettings.notSet")})()),S(n,w(de,{get when(){return t.isConfigured},get children(){return w(Pe,{intent:"danger",get onClick(){return t.onDelete},get children(){return e("account.currentSettings.deletePreference")}})}}),null),r})()};var Tp=j('<div><div class=card-body><h3 class="card-title text-lg"></h3><div class="space-y-4 text-sm"><div class="steps steps-vertical"><div class="step step-primary"><div class=text-left><div class=font-semibold></div><div class=text-gray-600></div></div></div><div class="step step-primary"><div class=text-left><div class=font-semibold></div><div class=text-gray-600></div></div></div><div class="step step-primary"><div class=text-left><div class=font-semibold></div><div class=text-gray-600></div></div></div><div class="step step-primary"><div class=text-left><div class=font-semibold></div><div class=text-gray-600></div></div></div></div><div class="alert alert-info"><div><div class=font-semibold></div><p class="text-xs mt-1"></p></div></div><div class="alert alert-warning"><div><div class=font-semibold></div><p class="text-xs mt-1">');const Op=t=>{const{t:e}=se();return(()=>{var r=Tp(),n=r.firstChild,s=n.firstChild,i=s.nextSibling,o=i.firstChild,a=o.firstChild,l=a.firstChild,c=l.firstChild,u=c.nextSibling,h=a.nextSibling,f=h.firstChild,d=f.firstChild,g=d.nextSibling,p=h.nextSibling,v=p.firstChild,y=v.firstChild,_=y.nextSibling,m=p.nextSibling,b=m.firstChild,$=b.firstChild,C=$.nextSibling,N=o.nextSibling,Q=N.firstChild,H=Q.firstChild,M=H.nextSibling,U=N.nextSibling,z=U.firstChild,ce=z.firstChild,D=ce.nextSibling;return S(s,w(Ms,{size:24}),null),S(s,()=>e("account.instructions.title"),null),S(c,()=>e("account.instructions.step1Title")),S(u,()=>e("account.instructions.step1Desc")),S(d,()=>e("account.instructions.step2Title")),S(g,()=>e("account.instructions.step2Desc")),S(y,()=>e("account.instructions.step3Title")),S(_,()=>e("account.instructions.step3Desc")),S($,()=>e("account.instructions.step4Title")),S(C,()=>e("account.instructions.step4Desc")),S(N,w(Ms,{size:24}),Q),S(H,()=>e("account.instructions.alternativeTitle")),S(M,()=>e("account.instructions.alternativeDesc")),S(U,w(cp,{size:24}),z),S(ce,()=>e("account.instructions.privateTitle")),S(D,()=>e("account.instructions.privateDesc")),J(()=>Dt(r,`card bg-base-100 shadow-xl transition-all duration-300 ${t.show?"ring-2 ring-primary":""}`)),r})()};var Cp=j("<select>");const Ap=br("select",{variants:{intent:{none:"",primary:"select-primary",secondary:"select-secondary",accent:"select-accent",info:"select-info",success:"select-success",warning:"select-warning",error:"select-error"},sizeVariant:{xs:"select-xs",sm:"select-sm",md:"select-md",lg:"select-lg",xl:"select-xl"},width:{full:"w-full",min:"min-w"}},defaultVariants:{sizeVariant:"md",intent:"none",width:"min"}}),an=t=>(()=>{var e=Cp();return e.addEventListener("change",r=>{t.onChange(r.currentTarget.value)}),S(e,()=>t.children),J(r=>{var n=t.id,s=Ap({intent:t.intent,sizeVariant:t.sizeVariant,width:t.width,class:t.class}),i=t.required;return n!==r.e&&ht(e,"id",r.e=n),s!==r.t&&Dt(e,r.t=s),i!==r.a&&(e.required=r.a=i),r},{e:void 0,t:void 0,a:void 0}),J(()=>e.value=t.value),e})();var Fs=j("<option>"),Pp=j('<div class="alert alert-error"><svg xmlns=http://www.w3.org/2000/svg class="stroke-current shrink-0 h-6 w-6"fill=none viewBox="0 0 24 24"><title>Error icon</title><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>'),xp=j('<div class="alert alert-success"><svg xmlns=http://www.w3.org/2000/svg class="stroke-current shrink-0 h-6 w-6"fill=none viewBox="0 0 24 24"><title>Success icon</title><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>'),Rp=j('<div class="card bg-base-100 shadow-xl transition-all duration-300"><div class=card-body><h2 class="card-title mb-4"><svg xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 24 24"class="size-6 text-blue-500"><title>Telegram logo</title><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg></h2><form class=space-y-6><div><label class=label for=municipality><span class="label-text font-semibold"></span><span class="label-text-alt text-error">*</span></label><span class="text-sm text-base-content"></span></div><div><label class=label for=telegram-chat-id><span class="label-text font-semibold"></span><span class="label-text-alt text-error">*</span></label><div class=input-group><input id=telegram-chat-id type=text class="input input-bordered flex-1"required></div><label for=telegram-chat-id><span class="text-sm text-base-content"></span></label></div><div class="card-actions justify-between"><button type=submit class="btn btn-primary">'),Ip=j("<option> "),jp=j('<span class="loading loading-spinner loading-sm">'),Up=j('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class="size-4 mr-2"><title>Save icon</title><path stroke-linecap=round stroke-linejoin=round d="M4.5 12.75l6 6 9-13.5">');const Np=t=>{const{t:e}=se();return(()=>{var r=Rp(),n=r.firstChild,s=n.firstChild;s.firstChild;var i=s.nextSibling,o=i.firstChild,a=o.firstChild,l=a.firstChild,c=a.nextSibling,u=o.nextSibling,h=u.firstChild,f=h.firstChild,d=h.nextSibling,g=d.firstChild,p=d.nextSibling,v=p.firstChild,y=u.nextSibling,_=y.firstChild;return S(s,()=>e("account.form.title"),null),ei(i,"submit",t.onSubmit),S(l,()=>e("account.form.municipalityLabel")),S(o,w(de,{get when(){return t.municipalities},get children(){return w(an,{id:"municipality",width:"full",get value(){return t.selectedMunicipality()},required:!0,onChange:m=>t.onMunicipalityChange(m),get disabled(){return t.isSubmitting()},get children(){return[(()=>{var m=Fs();return m.value=null,S(m,()=>e("account.form.selectPlaceholder")),m})(),w(gr,{get each(){return t.municipalities},children:m=>(()=>{var b=Ip(),$=b.firstChild;return S(b,()=>m.name,$),S(b,()=>m.area?`(${m.area})`:"",null),J(()=>b.value=m.id),b})()})]}})}}),c),S(o,w(de,{get when(){return!t.municipalities},get children(){return w(an,{width:"full",disabled:!0,onChange:()=>{},get children(){var m=Fs();return S(m,()=>e("account.form.loading")),m}})}}),c),S(c,()=>e("account.form.municipalityHelp")),S(f,()=>e("account.form.chatIdLabel")),g.$$input=m=>t.onTelegramChatIdInput(m.currentTarget.value),S(d,w(Pe,{type:"button",outline:!0,get onClick(){return t.onToggleInstructions},get children(){return[w(Qg,{size:16}),I(()=>e("account.form.help"))]}}),null),S(v,()=>e("account.form.chatIdHelp")),S(i,w(de,{get when(){return t.error()},get children(){var m=Pp(),b=m.firstChild,$=b.nextSibling;return S($,()=>t.error()),m}}),y),S(i,w(de,{get when(){return t.success()},get children(){var m=xp(),b=m.firstChild,$=b.nextSibling;return S($,()=>t.success()),m}}),y),S(_,(()=>{var m=I(()=>!!t.isSubmitting());return()=>m()?[jp(),I(()=>e("account.form.saving"))]:[Up(),I(()=>e("account.form.saveSettings"))]})()),J(m=>{var b=e("account.form.chatIdPlaceholder"),$=t.isSubmitting(),C=t.isSubmitting();return b!==m.e&&ht(g,"placeholder",m.e=b),$!==m.t&&(g.disabled=m.t=$),C!==m.a&&(_.disabled=m.a=C),m},{e:void 0,t:void 0,a:void 0}),J(()=>g.value=t.telegramChatId()),r})()};pt(["input"]);async function Dp(t,e){const{data:r}=await t.schema("tvtrash").from("notification_preferences").select().eq("user_id",e).maybeSingle();return r}async function Lp(t){const{data:e}=await t.schema("tvtrash").from("notification_types").select().eq("name","telegram").maybeSingle();return e}async function zp(t,e){const{data:r}=await t.schema("tvtrash").from("notification_preferences").upsert(e);return r}async function Bp(t,e){const{data:r}=await t.schema("tvtrash").from("notification_preferences").delete().eq("user_id",e);return r}var Mp=j('<dialog class="modal modal-open"><div class=modal-box><h3 class="text-lg font-bold"></h3><p class=py-4></p><div class=modal-action>'),Fp=j('<div class=min-h-screen><div class="breadcrumbs text-sm mb-6"><ul><li></li><li></li></ul></div><h1 class="text-3xl font-bold mb-8"></h1><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div></div><div>');function qp(){const t=An(),e=wt(),{t:r}=se(),[n]=Et(t,To),[s]=Et(t,Lp),[i,{refetch:o}]=Et(async()=>e.user()?await Dp(t,e.user().id):null),[a,l]=L(!1),[c,u]=L(!1),[h,f]=L(""),[d,g]=L(null),[p,v]=L(!1),[y,_]=L(""),[m,b]=L(""),[$,C]=L(!1),N=I(()=>i()&&i().municipality_id&&i().notification_info.chat_id);ln(()=>{const U=i();U&&(f(U.notification_info.chat_id),g(U.municipality_id))});const Q=async U=>{U.preventDefault(),b(""),_(""),v(!0);try{if(!h().trim())throw new Error(r("account.errors.enterChatId"));if(!s())throw new Error(r("account.errors.notificationTypeNotFound"));if(!d())throw new Error(r("account.errors.selectMunicipality"));if(!/^-?\d+$/.test(h().trim()))throw new Error(r("account.errors.invalidChatId"));await zp(t,{municipality_id:d(),user_id:e.user().id,notification_info:{chat_id:h().trim()},notification_type_id:s().id}),o(),_(r("account.success.profileUpdated"))}catch(z){b(z.message||r("account.errors.saveProfileError"))}finally{v(!1)}},H=async()=>{u(!0),b(""),_("");try{await Bp(t,e.user().id),o(),_(r("account.success.deleted")),l(!1)}catch(U){b(U.message||r("account.errors.deleteError"))}finally{u(!1)}};let M;return w(Xs,{get fallback(){return w(on,{})},get children(){var U=Fp(),z=U.firstChild,ce=z.firstChild,D=ce.firstChild,F=D.nextSibling,ie=z.nextSibling,Te=ie.nextSibling,Je=Te.firstChild,Ee=Je.nextSibling;return S(D,()=>r("account.profile")),S(F,()=>r("account.notificationSettings")),S(ie,()=>r("account.notificationSettings")),S(Je,w(Np,{get municipalities(){return n()},selectedMunicipality:d,onMunicipalityChange:g,isSubmitting:p,telegramChatId:h,onTelegramChatIdInput:be=>f(be),showInstructions:$,onToggleInstructions:()=>C(!$()),error:m,success:y,onSubmit:Q})),S(Ee,w(Op,{get show(){return $()}}),null),S(Ee,w($p,{get isConfigured(){return!!N()},get notificationPreference(){return i()},get municipalities(){return n()},onDelete:()=>{l(!0)}}),null),S(U,w(de,{get when(){return a()},get children(){var be=Mp(),Re=be.firstChild,Ie=Re.firstChild,yt=Ie.nextSibling,xn=yt.nextSibling,Rn=M;return typeof Rn=="function"?ti(Rn,be):M=be,S(Ie,()=>r("account.modal.deleteTitle")),S(yt,()=>r("account.modal.deleteMessage")),S(xn,w(Pe,{intent:"primary",onClick:()=>l(!1),get disabled(){return c()},get children(){return r("account.modal.cancel")}}),null),S(xn,w(Pe,{intent:"danger",onClick:H,get disabled(){return c()},get children(){return I(()=>!!c())()?w(on,{}):r("account.modal.delete")}}),null),be}}),null),U}})}var Zp=j('<div class="overflow-x-auto rounded-box border border-base-300 bg-base-100 shadow-xl"><table>');const Vp=br("table",{variants:{},defaultVariants:{}}),Wp=t=>(()=>{var e=Zp(),r=e.firstChild;return S(r,()=>t.children),J(()=>Dt(r,Vp())),e})();var Kp=j("<thead><tr><th></th><th>"),Hp=j("<tbody>"),Gp=j("<tr><td></td><td>");const Jp=t=>{const{t:e}=se();return w(Wp,{get children(){return[(()=>{var r=Kp(),n=r.firstChild,s=n.firstChild,i=s.nextSibling;return S(s,()=>e("calendar.table.date")),S(i,()=>e("calendar.table.waste")),r})(),(()=>{var r=Hp();return S(r,w(gr,{get each(){return t.schedules},children:n=>(()=>{var s=Gp(),i=s.firstChild,o=i.nextSibling;return S(i,()=>new Date(n.date).toLocaleDateString()),S(o,()=>n.waste.join(", ")),s})()})),r})()]}})};var Yp=j('<div class="alert alert-info alert-soft shadow-lg mb-6"><svg xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 24 24"class="size-6 text-blue-500"><title>Telegram logo</title><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg><div class=flex-1><h3 class=font-bold></h3><div class="text-sm opacity-75 mt-1"></div></div><div class="flex-none space-x-2"><button class="btn btn-sm btn-primary"type=button><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class="w-4 h-4 mr-1"><title>Settings icon</title><path stroke-linecap=round stroke-linejoin=round d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap=round stroke-linejoin=round d="M15 12a3 3 0 11-6 0 3 3 0 016 0z">');function Qp(t){const{t:e}=se();return(()=>{var r=Yp(),n=r.firstChild,s=n.nextSibling,i=s.firstChild,o=i.nextSibling,a=s.nextSibling,l=a.firstChild;return l.firstChild,S(i,()=>e("calendar.banner.title")),S(o,()=>e("calendar.banner.description")),l.$$click=()=>t.onConfigureClick?.(),S(l,()=>e("calendar.banner.configure"),null),r})()}pt(["click"]);var Xp=j('<div class="flex justify-between items-center mb-6"><div class=w-2/3><h1 class="text-3xl font-bold"></h1><p class="opacity-60 mt-1"></p></div><div class="w-1/3 flex justify-end">'),em=j("<option> ");const tm=()=>{const t=pn(),e=An(),{t:r}=se(),[n]=Et(e,To),[s,i]=L(n()?.[0]?.id||null),[o]=Et(s,async l=>l?await pg(e,l):[]),a=()=>{t("/account/notifications")};return ln(()=>{n()&&n().length>0&&!s()&&i(n()[0].id)}),w(Xs,{get fallback(){return w(on,{})},get children(){return[(()=>{var l=Xp(),c=l.firstChild,u=c.firstChild,h=u.nextSibling,f=c.nextSibling;return S(u,()=>r("calendar.title")),S(h,()=>r("calendar.description")),S(f,w(an,{intent:"primary",width:"full",get value(){return s()},onChange:d=>i(d),get children(){return w(gr,{get each(){return n()},children:d=>(()=>{var g=em(),p=g.firstChild;return S(g,()=>d.name,p),S(g,()=>d.area?`(${d.area})`:"",null),J(()=>g.value=d.id),g})()})}})),l})(),w(Qp,{onConfigureClick:a}),w(Jp,{get schedules(){return o()}})]}})};var rm=j(`<div class="hero min-h-[calc(100vh-4rem)] bg-base-200"><div class="hero-content flex-col md:flex-row gap-12"><div class="text-center md:text-left flex-1"><h1 class="text-5xl font-bold leading-tight"></h1><p class="py-6 text-lg text-base-content/90"></p><div class="flex flex-wrap gap-4 justify-center md:justify-start"></div></div><div class="mockup-phone border-primary max-h-180 max-w-90"><div class=mockup-phone-camera></div><div class="mockup-phone-display bg-[url('https://img.daisyui.com/images/stock/453966.webp')] bg-cover bg-center"><div class="w-full h-full backdrop-blur-[1px] pt-22 px-4 flex flex-col justify-start"><div class="w-full bg-[#2AABEE] text-white p-3 rounded-lg shadow-lg mb-4 flex items-start gap-3 animate-bounce"><div class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center shrink-0"></div><div class=flex-1><div class="flex justify-between items-center mb-1"><span class=font-bold></span><span class="text-xs text-base-content/80"></span></div><p class=text-sm>`);const nm=()=>{const{t}=se();return(()=>{var e=rm(),r=e.firstChild,n=r.firstChild,s=n.firstChild,i=s.nextSibling,o=i.nextSibling,a=n.nextSibling,l=a.firstChild,c=l.nextSibling,u=c.firstChild,h=u.firstChild,f=h.firstChild,d=f.nextSibling,g=d.firstChild,p=g.firstChild,v=p.nextSibling,y=g.nextSibling;return S(s,()=>t("landing.hero.title")),S(i,()=>t("landing.hero.description")),S(o,w(ct,{href:"/calendar",class:"btn btn-primary btn-lg shadow-xl",get children(){return t("landing.hero.ctaCalendar")}}),null),S(o,w(ct,{href:"/login",class:"btn btn-accent btn-lg shadow-xl",get children(){return t("landing.hero.ctaAuth")}}),null),S(f,w(np,{})),S(p,()=>t("landing.mockup.notification.title")),S(v,()=>t("landing.mockup.notification.time")),S(y,()=>t("landing.mockup.notification.body")),e})()};var sm=j('<form class=space-y-4><div class=form-control><label class="label pt-0"for=email><span class="label-text font-medium text-base-content/70"></span></label><input id=email type=email class="input input-bordered w-full h-11 rounded-md border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary shadow-sm"required></div><div class="form-control mt-6">'),im=j('<div class="alert alert-error text-sm py-2 rounded-md"><svg xmlns=http://www.w3.org/2000/svg class="stroke-current shrink-0 h-5 w-5"fill=none viewBox="0 0 24 24"><title>Error icon</title><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>'),om=j('<div class="alert alert-success text-sm py-2 rounded-md"><svg xmlns=http://www.w3.org/2000/svg class="stroke-current shrink-0 h-5 w-5"fill=none viewBox="0 0 24 24"><title>Success icon</title><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>'),am=j('<span class="loading loading-spinner loading-sm text-white">');function lm(t){const[e,r]=L(""),[n,s]=L(""),[i,o]=L(""),[a,l]=L(!1),c=wt(),{t:u}=se(),h=async f=>{f.preventDefault(),s(""),o(""),l(!0);try{await c.signInWithMagicLink(e()),o(u("auth.signInSuccess"))}catch(d){s(d.message||u("auth.signInError"))}finally{l(!1)}};return(()=>{var f=sm(),d=f.firstChild,g=d.firstChild,p=g.firstChild,v=g.nextSibling,y=d.nextSibling;return f.addEventListener("submit",h),S(p,()=>u("auth.email")),v.$$input=_=>r(_.currentTarget.value),S(f,(()=>{var _=I(()=>!!n());return()=>_()&&(()=>{var m=im(),b=m.firstChild,$=b.nextSibling;return S($,n),m})()})(),y),S(f,(()=>{var _=I(()=>!!i());return()=>_()&&(()=>{var m=om(),b=m.firstChild,$=b.nextSibling;return S($,i),m})()})(),y),S(y,w(Pe,{intent:"primary",width:"full",get disabled(){return a()},type:"submit",get children(){return I(()=>!!a())()?[am(),I(()=>u("auth.sendingEmail"))]:u("auth.signIn")}})),J(_=>{var m=u("auth.emailPlaceholder"),b=a();return m!==_.e&&ht(v,"placeholder",_.e=m),b!==_.t&&(v.disabled=_.t=b),_},{e:void 0,t:void 0}),J(()=>v.value=e()),f})()}pt(["input"]);var cm=j('<div class="h-svh flex items-center justify-center px-4 md:px-0"><div class="card card-border shadow-xl bg-base-100"><div class="card-body p-8"><div class="flex flex-col items-center mb-8"><div class="size-10 bg-primary/90 rounded-xl flex items-center justify-center mb-4 text-primary"><img src=/favicon.png alt=Logo class=size-6></div><h1 class="text-2xl ont-bold"></h1><p class="text-sm text-base-content/70 mt-2">');function um(){const t="/account/notifications",{t:e}=se(),r=wt(),n=pn(),s=()=>{n(t)};return r.user()?(n(t),null):(()=>{var i=cm(),o=i.firstChild,a=o.firstChild,l=a.firstChild,c=l.firstChild,u=c.nextSibling,h=u.nextSibling;return S(u,()=>e("auth.welcomeBack")),S(h,()=>e("auth.signInDescription")),S(a,w(lm,{onSuccess:s}),null),i})()}var hm=j('<h1 class="h-svh text-3xl text-primary/80 text-center pt-30">');const dm=()=>{const{t}=se();return(()=>{var e=hm();return S(e,()=>t("notFound")),e})()},fm=document.getElementById("root");ga(()=>w(sl,{root:bp,get children(){return[w(Qe,{path:"/",component:nm}),w(Qe,{path:"/calendar",component:tm}),w(Qe,{path:"/account",component:t=>w(Cg,{get children(){return t.children}}),get children(){return w(Qe,{path:"/notifications",component:qp})}}),w(Qe,{path:"/login",component:um}),w(Qe,{path:"*404",component:dm})]}}),fm);
